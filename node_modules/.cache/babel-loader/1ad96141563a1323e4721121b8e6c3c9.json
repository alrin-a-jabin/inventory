{"ast":null,"code":"var _jsxFileName = \"/home/alrin/reactproject/kms-ui/src/components/MBookLet/Components/MaterialList/MaterialList.js\";\nimport React, { Component } from 'react';\nimport MaterialListTable from \"./TableList\";\nimport moment from 'moment';\nimport { CustomButton, BUTTON_STYLE, BUTTON_TYPE, BUTTON_SIZE, COLOR } from '@6d-ui/buttons';\nimport AddParticipant from './AddParticipant';\nimport RenderModal from './RenderModal';\nexport default class MaterialList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getMaterialList = () => {\n      const url = this.props.url_Booklet.GET_ALL_MATERIAL + `?page=1&size=15&sort=material_id&status=&order=desc&keyword=`;\n      this.props.ajaxUtil.sendRequest(url, {}, materialList => {\n        if (materialList.hasOwnProperty('data')) {\n          if (materialList.data != null && materialList.data.length > 0) {\n            this.setState({\n              materialList: materialList.data\n            });\n          }\n        }\n      }, this.props.loadingFunction, {\n        method: 'GET',\n        isShowSuccess: false\n      });\n    };\n\n    this.onAddScheduleClick = material => {\n      this.setState({\n        selectedMaterial: material\n      });\n      this.setState({\n        addScheduleModal: true\n      });\n    };\n\n    this.closeAddScheduleModal = () => {\n      this.setState({\n        addScheduleModal: false\n      });\n    };\n\n    this.updateScheduleDateRange = (startDate, endDate) => {\n      this.setState({\n        dateRange: {\n          startDate,\n          endDate\n        }\n      });\n    };\n\n    this.materialStatusChange = (event, material) => {\n      console.log(material);\n      const data = {\n        status: event.currentTarget.checked ? \"1\" : \"0\",\n        schedule_id: material.schedule.assessment_id\n      };\n      this.props.ajaxUtil.sendRequest(this.props.url_Booklet.UPDATE_MATERIAL_STATUS, data, response => {\n        if (response.status) {\n          this.props.setNotification({\n            message: \"Successful\",\n            hasError: false,\n            timestamp: new Date().getTime()\n          });\n          this.getMaterialList();\n        } else {\n          this.setState({\n            addScheduleModal: true\n          });\n          this.props.setNotification({\n            message: response.message,\n            hasError: true,\n            timestamp: new Date().getTime()\n          });\n        }\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.onCreateSchedule = () => {\n      //validate\n      if (this.state.dateRange.startDate == null || this.state.dateRange.endDate == null) {\n        this.props.setNotification({\n          message: \"Please Select The Date Range\",\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n        return;\n      }\n\n      const url = this.props.url_Booklet.SAVE_SCHEDULE_TO_MATERIAL;\n      let data = {\n        \"material_id\": this.state.selectedMaterial.material_id,\n        \"training_type\": \"1\",\n        \"type\": \"mbooklet\",\n        \"start_date\": moment(this.state.dateRange.startDate).format(\"YYYY-MM-DD\"),\n        \"end_date\": moment(this.state.dateRange.endDate).format(\"YYYY-MM-DD\"),\n        \"start_time\": moment(this.state.dateRange.startDate).format(\"HH:mm:ss\"),\n        \"end_time\": moment(this.state.dateRange.endDate).format(\"HH:mm:ss\"),\n        \"access\": this.state.access,\n        \"status\": \"1\",\n        \"training_schedule_id\": \"\"\n      };\n      this.closeAddScheduleModal();\n      this.props.ajaxUtil.sendRequest(url, data, response => {\n        if (response.status) {\n          this.props.setNotification({\n            message: \"Successful\",\n            hasError: false,\n            timestamp: new Date().getTime()\n          });\n          this.getMaterialList();\n        } else {\n          this.setState({\n            addScheduleModal: true\n          });\n          this.props.setNotification({\n            message: response.message,\n            hasError: true,\n            timestamp: new Date().getTime()\n          });\n        }\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.openAddParticipantModel = material => {\n      this.setState({\n        material\n      });\n      this.setState({\n        addParticipantModel: true\n      });\n    };\n\n    this.closeAddParticipantModel = () => {\n      this.setState({\n        addParticipantModel: false\n      });\n    };\n\n    this.openAddMaterialPopup = () => {\n      this.setState({\n        addMaterialModel: true\n      });\n    };\n\n    this.closeAddMaterialPopup = () => {\n      this.setState({\n        addMaterialModel: false\n      });\n    };\n\n    this.onAccessChange = event => {\n      this.setState({\n        access: event.currentTarget.value\n      });\n    };\n\n    this.state = {\n      access: '',\n      moduleName: '',\n      materialList: [],\n      addScheduleModal: false,\n      addParticipantModel: false,\n      addMaterialModel: false,\n      selectedMaterial: {},\n      material: {},\n      dateRange: {\n        startDate: null,\n        endDate: null\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getMaterialList();\n  }\n\n  render() {\n    const {\n      materialList,\n      addScheduleModal,\n      addParticipantModel,\n      addMaterialModel,\n      material\n    } = this.state;\n    const {\n      ajaxUtil,\n      loadingFunction,\n      setNotification,\n      url_Booklet\n    } = this.props;\n    const {\n      onAccessChange,\n      getMaterialList,\n      openAddMaterialPopup,\n      closeAddMaterialPopup,\n      onAddScheduleClick,\n      closeAddScheduleModal,\n      updateScheduleDateRange,\n      onCreateSchedule,\n      materialStatusChange,\n      openAddParticipantModel,\n      closeAddParticipantModel\n    } = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainbg cus-pills h-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav nav-pills d-flex justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"nav-link active\",\n      \"data-toggle\": \"pill\",\n      href: \"#Quiz\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 15\n      }\n    }, \"Materials\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-content pzero  d-material-tabcontent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-pane active\",\n      id: \"Quiz\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Modules-txt h-100 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-10 modulesheader mt-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 d-flex align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mr-2 pr-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }, \"All Entities | \", materialList.length, \" \"), /*#__PURE__*/React.createElement(CustomButton, {\n      style: BUTTON_STYLE.BRICK,\n      type: BUTTON_TYPE.PRIMARY,\n      size: BUTTON_SIZE.MEDIUM,\n      align: \"right\",\n      label: \"Add Material\",\n      isButtonGroup: true,\n      onClick: openAddMaterialPopup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 d-flex align-items-center justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchbox \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"search\",\n      placeholder: \"What are you looking for ?\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-search\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 47\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"/dms/images/filter.svg\",\n      alt: \"filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(MaterialListTable, {\n      onAddScheduleClick: onAddScheduleClick,\n      materialStatusChange: materialStatusChange,\n      openAddParticipantModel: openAddParticipantModel,\n      materialList: materialList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }))))), /*#__PURE__*/React.createElement(RenderModal, {\n      onAccessChange: onAccessChange,\n      closeAddParticipantModel: closeAddParticipantModel,\n      openAddParticipantModel: openAddParticipantModel,\n      addParticipantModel: addParticipantModel,\n      addScheduleModal: addScheduleModal,\n      getMaterialList: getMaterialList,\n      closeAddScheduleModal: closeAddScheduleModal,\n      onCreateSchedule: onCreateSchedule,\n      updateScheduleDateRange: updateScheduleDateRange,\n      closeAddScheduleModal: closeAddScheduleModal,\n      addMaterialModel: addMaterialModel,\n      closeAddMaterialPopup: closeAddMaterialPopup,\n      ajaxUtil: ajaxUtil,\n      loadingFunction: loadingFunction,\n      setNotification: setNotification,\n      url_Booklet: url_Booklet,\n      material: material,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/alrin/reactproject/kms-ui/src/components/MBookLet/Components/MaterialList/MaterialList.js"],"names":["React","Component","MaterialListTable","moment","CustomButton","BUTTON_STYLE","BUTTON_TYPE","BUTTON_SIZE","COLOR","AddParticipant","RenderModal","MaterialList","constructor","props","getMaterialList","url","url_Booklet","GET_ALL_MATERIAL","ajaxUtil","sendRequest","materialList","hasOwnProperty","data","length","setState","loadingFunction","method","isShowSuccess","onAddScheduleClick","material","selectedMaterial","addScheduleModal","closeAddScheduleModal","updateScheduleDateRange","startDate","endDate","dateRange","materialStatusChange","event","console","log","status","currentTarget","checked","schedule_id","schedule","assessment_id","UPDATE_MATERIAL_STATUS","response","setNotification","message","hasError","timestamp","Date","getTime","onCreateSchedule","state","SAVE_SCHEDULE_TO_MATERIAL","material_id","format","access","openAddParticipantModel","addParticipantModel","closeAddParticipantModel","openAddMaterialPopup","addMaterialModel","closeAddMaterialPopup","onAccessChange","value","moduleName","componentDidMount","render","BRICK","PRIMARY","MEDIUM"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport MaterialListTable from \"./TableList\";\nimport moment from 'moment';\nimport {\n  CustomButton,\n  BUTTON_STYLE,\n  BUTTON_TYPE,\n  BUTTON_SIZE,\n  COLOR\n} from '@6d-ui/buttons';\nimport AddParticipant from './AddParticipant';\nimport RenderModal from './RenderModal';\n\nexport default class MaterialList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      access: '',\n      moduleName: '',\n      materialList: [],\n      addScheduleModal: false,\n      addParticipantModel: false,\n      addMaterialModel: false,\n      selectedMaterial: {},\n      material: {},\n      dateRange: {\n        startDate: null,\n        endDate: null,\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.getMaterialList();\n  }\n  getMaterialList = () => {\n    const url = this.props.url_Booklet.GET_ALL_MATERIAL + `?page=1&size=15&sort=material_id&status=&order=desc&keyword=`;\n    this.props.ajaxUtil.sendRequest(url, {}, materialList => {\n      if (materialList.hasOwnProperty('data')) {\n        if (materialList.data != null && materialList.data.length > 0) {\n          this.setState({ materialList: materialList.data })\n        }\n      }\n    }, this.props.loadingFunction,\n      { method: 'GET', isShowSuccess: false });\n  }\n  onAddScheduleClick = (material) => {\n    this.setState({ selectedMaterial: material });\n    this.setState({ addScheduleModal: true });\n  }\n\n  closeAddScheduleModal = () => {\n    this.setState({ addScheduleModal: false });\n  }\n  // update selected date range\n  updateScheduleDateRange = (startDate, endDate) => {\n    this.setState({\n      dateRange: {\n        startDate,\n        endDate\n      }\n    })\n  }\n  // status chmage api\n  materialStatusChange = (event, material) => {\n    console.log(material)\n    const data = {\n      status: event.currentTarget.checked ? \"1\":\"0\",\n      schedule_id: material.schedule.assessment_id\n    }\n    this.props.ajaxUtil.sendRequest(this.props.url_Booklet.UPDATE_MATERIAL_STATUS, data, response => {\n      if (response.status) {\n        this.props.setNotification({\n          message: \"Successful\",\n          hasError: false,\n          timestamp: new Date().getTime()\n        });\n        this.getMaterialList();\n\n      } else {\n        this.setState({ addScheduleModal: true });\n        this.props.setNotification({\n          message: response.message,\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n      }\n\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n\n\n  }\n  // to save the date\n  onCreateSchedule = () => {\n    //validate\n    if (this.state.dateRange.startDate == null || this.state.dateRange.endDate == null) {\n      this.props.setNotification({\n        message: \"Please Select The Date Range\",\n        hasError: true,\n        timestamp: new Date().getTime()\n      });\n      return;\n    }\n    const url = this.props.url_Booklet.SAVE_SCHEDULE_TO_MATERIAL;\n    let data = {\n      \"material_id\": this.state.selectedMaterial.material_id,\n      \"training_type\": \"1\",\n      \"type\": \"mbooklet\",\n      \"start_date\": moment(this.state.dateRange.startDate).format(\"YYYY-MM-DD\"),\n      \"end_date\": moment(this.state.dateRange.endDate).format(\"YYYY-MM-DD\"),\n      \"start_time\": moment(this.state.dateRange.startDate).format(\"HH:mm:ss\"),\n      \"end_time\": moment(this.state.dateRange.endDate).format(\"HH:mm:ss\"),\n      \"access\": this.state.access,\n      \"status\": \"1\",\n      \"training_schedule_id\": \"\"\n    }\n    this.closeAddScheduleModal();\n    this.props.ajaxUtil.sendRequest(url, data, response => {\n      if (response.status) {\n        this.props.setNotification({\n          message: \"Successful\",\n          hasError: false,\n          timestamp: new Date().getTime()\n        });\n        this.getMaterialList();\n\n      } else {\n        this.setState({ addScheduleModal: true });\n        this.props.setNotification({\n          message: response.message,\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n      }\n\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n\n  }\n  openAddParticipantModel = (material) => {\n    this.setState({ material });\n    this.setState({ addParticipantModel: true })\n  }\n  closeAddParticipantModel = () => {\n    this.setState({ addParticipantModel: false })\n  }\n  openAddMaterialPopup = () => {\n    this.setState({ addMaterialModel: true })\n  }\n  closeAddMaterialPopup = () => {\n    this.setState({ addMaterialModel: false })\n  }\n  onAccessChange = (event) => {\n    this.setState({ access: event.currentTarget.value })\n  }\n  render() {\n    const { materialList, addScheduleModal, addParticipantModel, addMaterialModel, material } = this.state;\n    const { ajaxUtil, loadingFunction, setNotification, url_Booklet } = this.props;\n    const { onAccessChange, getMaterialList, openAddMaterialPopup, closeAddMaterialPopup, onAddScheduleClick, closeAddScheduleModal, updateScheduleDateRange, onCreateSchedule, materialStatusChange, openAddParticipantModel, closeAddParticipantModel } = this;\n    return (\n      <div className=\"col-md-12\">\n        <div className=\"mainbg cus-pills h-100\">\n          <ul className=\"nav nav-pills d-flex justify-content-between\">\n            <li className=\"nav-item\">\n              <a className=\"nav-link active\" data-toggle=\"pill\" href=\"#Quiz\">Materials</a>\n            </li>\n            {/* commented for new flow */}\n            {/* <Link to=\"/Dashboard/MBookLet/\">\n            <img src=\"/dms/images/close.svg\" className=\"nav-close\" />\n          </Link> */}\n          </ul>\n          <div className=\"tab-content pzero  d-material-tabcontent\">\n            <div className=\"tab-pane active\" id=\"Quiz\">\n              <div className=\"Modules-txt h-100 \">\n                <div className=\"col-md-12\">\n                  {/* commented for new flow */}\n                  {/* <h4 className=\"title\"><span>Module:</span> {moduleName}</h4> */}\n                </div>\n                <div className=\"d-flex mb-10 modulesheader mt-30\">\n                  <div className=\"col-md-6 d-flex align-items-center\">\n                    <h4 className=\"mr-2 pr-3\">All Entities | {materialList.length} </h4>\n                    <CustomButton\n                      style={BUTTON_STYLE.BRICK}\n                      type={BUTTON_TYPE.PRIMARY}\n                      size={BUTTON_SIZE.MEDIUM}\n                      align=\"right\"\n                      label=\"Add Material\"\n                      isButtonGroup={true}\n                      onClick={openAddMaterialPopup}\n                    />\n                  </div>\n\n\n                  <div className=\"col-md-6 d-flex align-items-center justify-content-end\">\n                    <div className=\"searchbox \">\n                      <input type=\"search\" placeholder=\"What are you looking for ?\" />\n                      <button className=\"btn\"><i className=\"fa fa-search\" aria-hidden=\"true\" /></button>\n                    </div>\n                    <div className=\"filter\">\n                      <img src=\"/dms/images/filter.svg\" alt=\"filter\" />\n                    </div>\n                  </div>\n                </div>\n                <MaterialListTable\n                  onAddScheduleClick={onAddScheduleClick}\n                  materialStatusChange={materialStatusChange}\n                  openAddParticipantModel={openAddParticipantModel}\n                  materialList={materialList} />\n              </div>\n            </div>\n          </div>\n        </div>\n        <RenderModal\n          onAccessChange={onAccessChange}\n          closeAddParticipantModel={closeAddParticipantModel}\n          openAddParticipantModel={openAddParticipantModel}\n          addParticipantModel={addParticipantModel}\n          addScheduleModal={addScheduleModal}\n          getMaterialList={getMaterialList}\n          closeAddScheduleModal={closeAddScheduleModal}\n          onCreateSchedule={onCreateSchedule}\n          updateScheduleDateRange={updateScheduleDateRange}\n          closeAddScheduleModal={closeAddScheduleModal}\n          addMaterialModel={addMaterialModel}\n          closeAddMaterialPopup={closeAddMaterialPopup}\n          ajaxUtil={ajaxUtil}\n          loadingFunction={loadingFunction}\n          setNotification={setNotification}\n          url_Booklet={url_Booklet}\n          material={material}\n        />\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}