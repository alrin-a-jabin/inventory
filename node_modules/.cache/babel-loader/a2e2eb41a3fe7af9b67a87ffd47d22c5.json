{"ast":null,"code":"var _jsxFileName = \"/home/alrin/reactproject/kms-ui/src/components/schedule/ScheduleTraining/Component/AccessOrder.js\";\nimport React, { Component } from 'react';\nimport moment from \"moment\";\nexport default class AccessOrder extends Component {\n  constructor(props) {\n    super(props);\n\n    this.isEdit = () => {\n      if (this.props.match.params.hasOwnProperty(\"edit\") && this.props.match.params.edit !== undefined) {\n        this.setState({\n          isEdit: true\n        });\n      }\n    };\n\n    this.getMaterialList = () => {\n      const data = {\n        trainingId: this.props.match.params.schedule_id\n      };\n      this.props.ajaxUtil.sendRequest(this.props.url_training.LIST_SCHEDULE_MATERIAL, data, response => {\n        this.props.setNotification({\n          message: response.message,\n          hasError: !response.status,\n          timestamp: new Date().getTime()\n        });\n\n        if (response.status) {\n          let datas = response.data.map(material => ({ ...material,\n            dayOrderStart: 0,\n            dayOrderEnd: 0\n          }));\n          this.setState({\n            materialList: datas\n          });\n        }\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.onDragStart = (event, index) => {\n      event.dataTransfer.setData(\"index\", index);\n    };\n\n    this.onDragOver = event => {\n      event.preventDefault();\n    };\n\n    this.onDrop = (event, index) => {\n      event.preventDefault();\n      let currentIndex = index;\n      let newIndex = event.dataTransfer.getData(\"index\");\n      let items = [...this.state.materialList];\n      items[currentIndex] = this.state.materialList[newIndex];\n      items[newIndex] = this.state.materialList[currentIndex];\n      this.setState({\n        materialList: items\n      });\n    };\n\n    this.handleChange = (event, index) => {\n      let items = [...this.state.materialList];\n      items[index][event.currentTarget.name] = event.currentTarget.value;\n      this.setState({\n        materialList: items\n      });\n    };\n\n    this.save = () => {\n      let error = false;\n      this.state.materialList.forEach(material => {\n        if (material.dayOrderStart == 0 || material.dayOrderEnd == 0) {\n          error = true;\n        }\n      });\n\n      if (error) {\n        this.props.setNotification({\n          message: 'Please Fill Up',\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n        return;\n      }\n\n      const data = {\n        order: this.state.materialList.map(material => {\n          if (material.hasOwnProperty('role_play_id')) {\n            return material.role_play_id;\n          }\n\n          ;\n\n          if (material.hasOwnProperty('assessment_id')) {\n            return material.assessment_id;\n          }\n\n          ;\n        }),\n        type: this.state.materialList.map(material => material.type),\n        day_order_start: this.state.materialList.map(material => material.dayOrderStart),\n        day_order_end: this.state.materialList.map(material => material.dayOrderEnd),\n        day_order_start_time: this.state.materialList.map(material => material.dayOrderStartTime),\n        day_order_end_time: this.state.materialList.map(material => material.dayOrderEndTime)\n      };\n      this.props.ajaxUtil.sendRequest(this.props.url_training.SAVE_MARTIAL_ORDER, data, response => {\n        this.props.setNotification({\n          message: response.message,\n          hasError: !response.status,\n          timestamp: new Date().getTime()\n        });\n\n        if (response.status) {\n          if (this.state.isEdit) {\n            this.props.history.push('/Dashboard/Training/List');\n          } else {\n            this.props.history.push('/Dashboard/Schedule/Training/AddUser/' + this.props.match.params.schedule_id);\n          }\n        }\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.state = {\n      isEdit: false,\n      materialList: []\n    };\n  }\n\n  componentDidMount() {\n    this.getMaterialList();\n    this.isEdit();\n  }\n\n  render() {\n    const {\n      onDragStart,\n      onDragOver,\n      onDrop,\n      handleChange\n    } = this;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"progress__bar mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps Bullet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bullet active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"check fa fa-check active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bullet active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 48\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"check fa fa-check active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bullet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"check fa fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"steps\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bullet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"check fa fa-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"sub__heading\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }\n    }, \"Set Access Order\", /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub__caption\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, \"Drag the Options to Set the Order\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"drag__container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, this.state.materialList.map((material, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      onDrop: event => onDrop(event, index),\n      onDragOver: event => onDragOver(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onDragStart: event => onDragStart(event, index),\n      className: \"created__list__wrap drag__element\",\n      draggable: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"list_item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 27\n      }\n    }, \"Order - \", index + 1), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 27\n      }\n    }, material.hasOwnProperty('material_name') ? material.material_name : material.role_play_title)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"select_section row w-100 ml2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 29\n      }\n    }, \" Start Day \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      name: \"dayOrderStart\",\n      min: moment().format(\"YYYY-MM-DD\"),\n      value: material.dayOrderStart,\n      onChange: event => handleChange(event, index),\n      className: \"form-control mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 29\n      }\n    }, \" Start Time \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"time\",\n      name: \"dayOrderStartTime\",\n      value: material.dayOrderStartTime,\n      onChange: event => handleChange(event, index),\n      className: \"form-control mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 29\n      }\n    }, \"End Day \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"date\",\n      min: moment().format(\"YYYY-MM-DD\"),\n      name: \"dayOrderEnd\",\n      value: material.dayOrderEnd,\n      onChange: event => handleChange(event, index),\n      className: \"form-control mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 29\n      }\n    }, \"End TIme \"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"time\",\n      name: \"dayOrderEndTime\",\n      value: material.dayOrderEndTime,\n      onChange: event => handleChange(event, index),\n      className: \"form-control mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }))))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"footer__button__fixed w-100 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button__work\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger btn__fade cancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.getMaterialList,\n      type: \"button\",\n      className: \"btn btn-danger btn__fade reset\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, \"Reset\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.save,\n      className: \"btn btn-danger btn__fade add next_btn_3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, this.state.isEdit ? 'Finish' : 'Next'))))));\n  }\n\n}\n\nfunction RenderOption(props) {\n  let output = [];\n\n  for (let i = 0; i <= 30; i++) {\n    output.push( /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 18\n      }\n    }, i));\n  }\n\n  return output;\n}","map":{"version":3,"sources":["/home/alrin/reactproject/kms-ui/src/components/schedule/ScheduleTraining/Component/AccessOrder.js"],"names":["React","Component","moment","AccessOrder","constructor","props","isEdit","match","params","hasOwnProperty","edit","undefined","setState","getMaterialList","data","trainingId","schedule_id","ajaxUtil","sendRequest","url_training","LIST_SCHEDULE_MATERIAL","response","setNotification","message","hasError","status","timestamp","Date","getTime","datas","map","material","dayOrderStart","dayOrderEnd","materialList","loadingFunction","method","isShowSuccess","onDragStart","event","index","dataTransfer","setData","onDragOver","preventDefault","onDrop","currentIndex","newIndex","getData","items","state","handleChange","currentTarget","name","value","save","error","forEach","order","role_play_id","assessment_id","type","day_order_start","day_order_end","day_order_start_time","dayOrderStartTime","day_order_end_time","dayOrderEndTime","SAVE_MARTIAL_ORDER","history","push","componentDidMount","render","material_name","role_play_title","format","RenderOption","output","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport moment from \"moment\";\nexport default class AccessOrder extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isEdit: false,\n      materialList: [],\n    }\n  }\n\n  componentDidMount() {\n    this.getMaterialList()\n    this.isEdit();\n  }\n  isEdit = () => {\n\n    if (this.props.match.params.hasOwnProperty(\"edit\") && this.props.match.params.edit !== undefined) {\n      this.setState({ isEdit: true });\n    }\n  }\n\n  getMaterialList = () => {\n    const data = {\n      trainingId: this.props.match.params.schedule_id\n    }\n    this.props.ajaxUtil.sendRequest(this.props.url_training.LIST_SCHEDULE_MATERIAL, data, response => {\n      this.props.setNotification({\n        message: response.message,\n        hasError: !response.status,\n        timestamp: new Date().getTime()\n      });\n      if (response.status) {\n        let datas = response.data.map((material) => ({\n          ...material,\n          dayOrderStart: 0,\n          dayOrderEnd: 0\n        }))\n        this.setState({ materialList: datas })\n      }\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n  }\n  onDragStart = (event, index) => {\n    event.dataTransfer.setData(\"index\", index);\n  }\n  onDragOver = (event) => {\n    event.preventDefault();\n  }\n  onDrop = (event, index) => {\n    event.preventDefault();\n    let currentIndex = index;\n    let newIndex = event.dataTransfer.getData(\"index\");\n    let items = [...this.state.materialList];\n    items[currentIndex] = this.state.materialList[newIndex];\n    items[newIndex] = this.state.materialList[currentIndex];\n    this.setState({ materialList: items });\n  }\n  handleChange = (event, index) => {\n    let items = [...this.state.materialList];\n    items[index][event.currentTarget.name] = event.currentTarget.value;\n    this.setState({ materialList: items });\n  }\n  save = () => {\n    let error = false;\n    this.state.materialList.forEach((material) => {\n      if (material.dayOrderStart == 0 || material.dayOrderEnd == 0) {\n        error = true;\n      }\n    })\n    if (error) {\n      this.props.setNotification({\n        message: 'Please Fill Up',\n        hasError: true,\n        timestamp: new Date().getTime()\n      });\n      return;\n    }\n\n    const data = {\n      order: this.state.materialList.map((material) => { if (material.hasOwnProperty('role_play_id')) { return material.role_play_id }; if (material.hasOwnProperty('assessment_id')) { return material.assessment_id }; }),\n      type: this.state.materialList.map((material) => material.type),\n      day_order_start: this.state.materialList.map((material) => material.dayOrderStart),\n      day_order_end: this.state.materialList.map((material) => material.dayOrderEnd),\n      day_order_start_time: this.state.materialList.map((material) => material.dayOrderStartTime),\n      day_order_end_time: this.state.materialList.map((material) => material.dayOrderEndTime),\n\n    }\n    this.props.ajaxUtil.sendRequest(this.props.url_training.SAVE_MARTIAL_ORDER, data, response => {\n      this.props.setNotification({\n        message: response.message,\n        hasError: !response.status,\n        timestamp: new Date().getTime()\n      });\n      if (response.status) {\n        if (this.state.isEdit) {\n          this.props.history.push('/Dashboard/Training/List')\n        }\n        else {\n          this.props.history.push('/Dashboard/Schedule/Training/AddUser/' + this.props.match.params.schedule_id)\n        }\n      }\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n\n  }\n  render() {\n    const { onDragStart, onDragOver, onDrop, handleChange } = this;\n    return (\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <div className=\"progress__bar mt-4\">\n              <div className=\"steps Bullet\">\n                <div className=\"bullet active\">\n                  <span></span>\n                </div>\n                <div className=\"check fa fa-check active\"></div>\n\n              </div>\n              <div className=\"steps \">\n                <div className=\"bullet active\"><span></span></div>\n                <div className=\"check fa fa-check active\"></div>\n              </div>\n              <div className=\"steps\">\n                <div className=\"bullet\"><span></span></div>\n                <div className=\"check fa fa-check\">\n\n                </div>\n              </div>\n              <div className=\"steps\">\n                <div className=\"bullet\"><span></span></div>\n                <div className=\"check fa fa-check\">\n\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"col-md-12\">\n            <h4 className=\"sub__heading\">\n              Set Access Order\n              <p className=\"sub__caption\">Drag the Options to Set the Order</p>\n            </h4>\n          </div>\n          <div className=\"col-md-12\">\n            <div className=\"drag__container\">\n              {\n                this.state.materialList.map((material, index) => (\n                  <div\n                    key={index}\n                    onDrop={(event) => onDrop(event, index)}\n                    onDragOver={(event) => onDragOver(event)}>\n                    <div\n                      onDragStart={(event) => onDragStart(event, index)}\n                      className=\"created__list__wrap drag__element\"\n                      draggable=\"true\">\n                      <div className=\"list_item\">\n                        <div className=\"d-flex\">\n                          <h6>Order - {index + 1}</h6>\n                          <p>{(material.hasOwnProperty('material_name') ? material.material_name : material.role_play_title)}</p>\n                        </div>\n                        <div className=\"select_section row w-100 ml2\">\n                          <div className=\"col\">\n                            <label > Start Day </label>\n                            <input \n                              type=\"date\"\n                              name=\"dayOrderStart\"\n                              min={moment().format(\"YYYY-MM-DD\")}\n                              value={material.dayOrderStart}\n                              onChange={(event) => handleChange(event, index)}\n                              className=\"form-control mr-2\" />\n                          </div>\n                          <div className=\"col\">\n                            <label > Start Time </label>\n                            <input\n                              type=\"time\"\n                              name=\"dayOrderStartTime\"\n                              value={material.dayOrderStartTime}\n                              onChange={(event) => handleChange(event, index)}\n                              className=\"form-control mr-2\" />\n\n                          </div>\n                          <div className=\"col\">\n                            <label>End Day </label>\n                            <input\n                              type=\"date\"\n                              min={moment().format(\"YYYY-MM-DD\")}\n                              name=\"dayOrderEnd\"\n                              value={material.dayOrderEnd}\n                              onChange={(event) => handleChange(event, index)}\n                              className=\"form-control mr-2\" />\n                          </div>\n                          <div className=\"col\">\n                            <label>End TIme </label>\n                            <input\n                              type=\"time\"\n                              name=\"dayOrderEndTime\"\n                              value={material.dayOrderEndTime}\n                              onChange={(event) => handleChange(event, index)}\n                              className=\"form-control mr-2\" />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              }\n            </div>\n          </div>\n          <div className=\"col-md-12\">\n            <div className=\"footer__button__fixed w-100 text-right\">\n              <div className=\"button__work\">\n                <button type=\"button\" className=\"btn btn-danger btn__fade cancel\">Cancel</button>\n                <button onClick={this.getMaterialList} type=\"button\" className=\"btn btn-danger btn__fade reset\">Reset</button>\n                <button type=\"button\"\n                  onClick={this.save}\n                  className=\"btn btn-danger btn__fade add next_btn_3\">{this.state.isEdit ? 'Finish' : 'Next'}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\n\nfunction RenderOption(props) {\n  let output = [];\n  for (let i = 0; i <= 30; i++) {\n    output.push((<option key={i} value={i}>{i}</option>))\n  }\n  return output\n}"]},"metadata":{},"sourceType":"module"}