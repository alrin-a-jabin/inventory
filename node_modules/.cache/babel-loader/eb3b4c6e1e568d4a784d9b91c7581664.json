{"ast":null,"code":"import { validateForm } from '@6d-ui/fields';\nimport { useState, useEffect } from \"react\";\nexport default function useFieldItem(FIELDS, initialValues = {}, preValidation, postValidation) {\n  // const initialValues = defaultValues == null ? {} : defaultValues;\n  const [values, setValues] = useState(initialValues);\n  const [fields, setFields] = useState({});\n  useEffect(() => {\n    console.log('upated');\n  }, [values]);\n\n  const handleChange = (name, value, obj) => {\n    const {\n      isTouched\n    } = obj || {\n      isTouched: false\n    };\n\n    if (isTouched) {\n      value = values[name];\n    }\n\n    const fieldValues = fields;\n\n    if (FIELDS[name]) {\n      const validate = validateForm(name, value, FIELDS[name], preValidation, postValidation);\n\n      if (validate) {\n        fieldValues[name] = validate;\n      } else {\n        fieldValues[name] = {\n          hasError: false,\n          errorMsg: ''\n        };\n      }\n    }\n\n    setValues(values => ({ ...values,\n      [name]: value\n    }));\n    setFields(fieldValues);\n\n    if (isTouched && fields[name] && fields[name].hasError) {\n      setFields(fields);\n      return false;\n    }\n  };\n\n  const validateValues = keys => {\n    const fieldValues = fields;\n    keys.map(key => {\n      const validate = validateForm(key, values[key], FIELDS[key], preValidation, postValidation);\n\n      if (validate) {\n        fieldValues[key] = validate;\n      } else {\n        fieldValues[key] = {\n          hasError: false,\n          errorMsg: ''\n        };\n      }\n    });\n    setFields(fieldValues);\n  };\n\n  const reset = () => {\n    setValues(values => {\n      const newValues = {};\n      Object.keys(values).forEach(function (key) {\n        newValues[key] = '';\n      });\n      return newValues;\n    });\n    setFields({});\n  };\n\n  return [values, fields, handleChange, validateValues, reset];\n}","map":{"version":3,"sources":["/home/alrin/Downloads/INVENTORY22/src/util/fieldItem.js"],"names":["validateForm","useState","useEffect","useFieldItem","FIELDS","initialValues","preValidation","postValidation","values","setValues","fields","setFields","console","log","handleChange","name","value","obj","isTouched","fieldValues","validate","hasError","errorMsg","validateValues","keys","map","key","reset","newValues","Object","forEach"],"mappings":"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","sourcesContent":["import { validateForm } from '@6d-ui/fields';\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function useFieldItem(FIELDS, initialValues = {}, preValidation, postValidation) {\r\n    // const initialValues = defaultValues == null ? {} : defaultValues;\r\n    const [values, setValues] = useState(initialValues);\r\n    const [fields, setFields] = useState({});\r\n\r\n    useEffect(() => {\r\n        console.log('upated')\r\n    }, [values])\r\n\r\n    const handleChange = (name, value, obj) => {\r\n\r\n        const { isTouched } = obj || {\r\n            isTouched: false\r\n        };\r\n\r\n        if (isTouched) {\r\n            value = values[name];\r\n        }\r\n\r\n        const fieldValues = fields;\r\n        if (FIELDS[name]) {\r\n            const validate = validateForm(name, value, FIELDS[name], preValidation, postValidation);\r\n            if (validate) {\r\n                fieldValues[name] = validate;\r\n            } else {\r\n                fieldValues[name] = {\r\n                    hasError: false,\r\n                    errorMsg: ''\r\n                };\r\n            }\r\n        }\r\n\r\n        setValues(values => ({\r\n            ...values,\r\n            [name]: value\r\n        }))\r\n\r\n        setFields(fieldValues)\r\n\r\n        if (isTouched && fields[name] && fields[name].hasError) {\r\n            setFields(fields);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    const validateValues = (keys) => {\r\n        const fieldValues = fields;\r\n        keys.map((key) => {\r\n            const validate = validateForm(key, values[key], FIELDS[key], preValidation, postValidation);\r\n            if (validate) {\r\n                fieldValues[key] = validate;\r\n            } else {\r\n                fieldValues[key] = {\r\n                    hasError: false,\r\n                    errorMsg: ''\r\n                };\r\n            }\r\n        }\r\n        );\r\n        setFields(fieldValues)\r\n    }\r\n\r\n    const reset = () => {\r\n        setValues(values => {\r\n            const newValues = {};\r\n            Object.keys(values).forEach(function (key) {\r\n                newValues[key] = ''\r\n            });\r\n            return newValues;\r\n        })\r\n        setFields({});\r\n    };\r\n\r\n\r\n\r\n    return [values, fields, handleChange, validateValues, reset]\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}