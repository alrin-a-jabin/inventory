{"ast":null,"code":"var _jsxFileName = \"/home/alrin/Downloads/INVENTORY22/src/components/changePswd/ChangePswd.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport { Row, Col, InputGroup, InputGroupAddon, Input } from \"reactstrap\";\nimport _ from \"lodash\";\nimport { withRouter } from \"react-router-dom\";\nimport md5 from \"md5\";\nimport { CustomButton, BUTTON_STYLE, BUTTON_TYPE, BUTTON_SIZE } from '@6d-ui/buttons';\n\nfunction ChangePswd(props) {\n  const [newPassword, setNewPassword] = useState('');\n  const [password, setPassword] = useState('');\n  const [passShow, setPassShow] = useState('');\n  const [confPassShow, setConfPassShow] = useState('');\n  const [newPassShow, setNewPassShow] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isShow, setIsShow] = useState({\n    password: false,\n    newPass: false,\n    confPass: false\n  });\n  useEffect(() => {\n    props.setHeader('Change Password');\n  }, []);\n\n  const handlePassworChange = (name, val) => {\n    if (name === \"password\") {\n      if (val && val.length > 0) {\n        let str = '';\n        const elem = document.getElementById('sampleChar');\n        let value = password;\n\n        for (var i = 0; i < val.length; i++) {\n          // str += '*';\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\n          str += elem.textContent;\n\n          if (val.length < password.length) {\n            value = value.substring(0, val.length);\n          } else if (i == val.length - 1) {\n            value += val[i];\n          }\n        }\n\n        setPassShow(str);\n        setPassword(value);\n      } else {\n        setPassShow('');\n        setPassword('');\n      }\n    }\n\n    if (name === \"confPass\") {\n      if (val && val.length > 0) {\n        let str = '';\n        const elem = document.getElementById('sampleChar');\n        let value = confirmPassword;\n\n        for (var i = 0; i < val.length; i++) {\n          // str += '*';\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\n          str += elem.textContent;\n\n          if (val.length < confirmPassword.length) {\n            value = value.substring(0, val.length);\n          } else if (i == val.length - 1) {\n            value += val[i];\n          }\n        }\n\n        setConfPassShow(str);\n        setConfirmPassword(value);\n      } else {\n        setConfPassShow('');\n        setConfirmPassword('');\n      }\n    }\n\n    if (name === \"newPass\") {\n      if (val && val.length > 0) {\n        let str = '';\n        const elem = document.getElementById('sampleChar');\n        let value = newPassword;\n\n        for (var i = 0; i < val.length; i++) {\n          // str += '*';\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\n          str += elem.textContent;\n\n          if (val.length < newPassword.length) {\n            value = value.substring(0, val.length);\n          } else if (i == val.length - 1) {\n            value += val[i];\n          }\n        }\n\n        setNewPassShow(str);\n        setNewPassword(value);\n      } else {\n        setNewPassShow('');\n        setNewPassword('');\n      }\n    }\n  };\n\n  function setShow(name) {\n    const isShowTmp = { ...isShow\n    };\n\n    if (name === \"password\") {\n      isShowTmp.password = !isShowTmp.password;\n    }\n\n    if (name === \"newPass\") {\n      isShowTmp.newPass = !isShowTmp.newPass;\n    }\n\n    if (name === \"confPass\") {\n      isShowTmp.confPass = !isShowTmp.confPass;\n    }\n\n    setIsShow(isShowTmp);\n  }\n\n  function onCancel() {\n    props.history.goBack();\n  }\n\n  const getErrorMsg = () => {\n    if (error || props.message) {\n      return React.createElement(\"div\", {\n        className: \"errorMsg_login col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, error);\n    }\n  };\n\n  const onSubmitClick = e => {\n    e.preventDefault();\n\n    if (!password) {\n      setError(\"Please enter your current password !\");\n      return false;\n    }\n\n    if (!newPassword) {\n      setError(\"Please enter your new password !\");\n      return false;\n    }\n\n    if (!confirmPassword) {\n      setError(\"Please confirm your new password !\");\n      return false;\n    }\n\n    if (confirmPassword != newPassword) {\n      setError(\"New Password and Confirm password must be same !\");\n      return false;\n    }\n\n    setError(\"\");\n    const req = {\n      userId: props.loggedInUser.userId,\n      password: password,\n      // newPassword: encrypt(this.state.newPwd),\n      newPassword: newPassword,\n      // confirmPassword: encrypt(this.state.confirmPwd)\n      confirmPassword: confirmPassword\n    };\n    props.ajaxUtil.sendRequest(props.urlConstants.CHANGE_PSWD_URL, req, (response, hasError) => {\n      if (!hasError) {\n        if (props.redirect) {\n          props.history.push(props.redirect);\n        } else {\n          setPassword(\"\");\n          setNewPassword(\"\");\n          setConfirmPassword(\"\");\n          setPassShow('');\n          setConfPassShow('');\n          setNewPassShow('');\n          setIsShow({\n            password: false,\n            newPass: false,\n            confPass: false\n          });\n        }\n      }\n    }, props.loadingFunction, {\n      isShowSuccess: true,\n      isProceedOnError: true\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"custom-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-Brick\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-Brick-Head\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    id: \"sampleChar\",\n    style: {\n      display: 'none'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"\\xB7\"), React.createElement(\"div\", {\n    className: \"form-Brick-body login-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, getErrorMsg(), React.createElement(Row, {\n    className: \"mx-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(Col, {\n    className: \"col-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, React.createElement(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: event => handlePassworChange(\"password\", event.target.value),\n    value: isShow.password ? password : passShow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }), React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    style: {\n      lineHeight: '38px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fa fa-eye\",\n    style: {\n      width: '21px'\n    },\n    onClick: () => setShow(\"password\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"floating-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \"Old password\")))), React.createElement(Row, {\n    className: \"mx-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(Col, {\n    className: \"col-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: event => handlePassworChange(\"newPass\", event.target.value),\n    value: isShow.newPass ? newPassword : newPassShow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }), React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    style: {\n      lineHeight: '38px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fa fa-eye\",\n    style: {\n      width: '21px'\n    },\n    onClick: () => setShow(\"newPass\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"floating-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, \"New password\")))), React.createElement(Row, {\n    className: \"mx-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, React.createElement(Col, {\n    className: \"col-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(InputGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, React.createElement(Input, {\n    onChange: event => handlePassworChange(\"confPass\", event.target.value),\n    value: isShow.confPass ? confirmPassword : confPassShow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }), React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    style: {\n      lineHeight: '38px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fa fa-eye\",\n    style: {\n      width: '21px'\n    },\n    onClick: () => setShow(\"confPass\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"floating-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, \"Confirm new password\")))))), React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(CustomButton, {\n    style: BUTTON_STYLE.BRICK,\n    type: BUTTON_TYPE.PRIMARY,\n    size: BUTTON_SIZE.LARGE,\n    align: \"right\",\n    label: \"Update\",\n    isButtonGroup: true,\n    onClick: onSubmitClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }), React.createElement(CustomButton, {\n    style: BUTTON_STYLE.BRICK,\n    type: BUTTON_TYPE.SECONDARY,\n    size: BUTTON_SIZE.LARGE,\n    align: \"right\",\n    label: \"Cancel\",\n    isButtonGroup: true,\n    onClick: onCancel,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  })));\n}\n\nexport default withRouter(ChangePswd);","map":{"version":3,"sources":["/home/alrin/Downloads/INVENTORY22/src/components/changePswd/ChangePswd.js"],"names":["React","Component","useState","useEffect","Row","Col","InputGroup","InputGroupAddon","Input","_","withRouter","md5","CustomButton","BUTTON_STYLE","BUTTON_TYPE","BUTTON_SIZE","ChangePswd","props","newPassword","setNewPassword","password","setPassword","passShow","setPassShow","confPassShow","setConfPassShow","newPassShow","setNewPassShow","confirmPassword","setConfirmPassword","error","setError","isShow","setIsShow","newPass","confPass","setHeader","handlePassworChange","name","val","length","str","elem","document","getElementById","value","i","textContent","substring","setShow","isShowTmp","onCancel","history","goBack","getErrorMsg","message","onSubmitClick","e","preventDefault","req","userId","loggedInUser","ajaxUtil","sendRequest","urlConstants","CHANGE_PSWD_URL","response","hasError","redirect","push","loadingFunction","isShowSuccess","isProceedOnError","display","event","target","lineHeight","width","BRICK","PRIMARY","LARGE","SECONDARY"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\r\nimport { Row, Col, InputGroup, InputGroupAddon, Input } from \"reactstrap\";\r\nimport _ from \"lodash\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport md5 from \"md5\";\r\nimport {\r\n  CustomButton,\r\n  BUTTON_STYLE,\r\n  BUTTON_TYPE,\r\n  BUTTON_SIZE\r\n} from '@6d-ui/buttons';\r\n\r\nfunction ChangePswd(props) {\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passShow, setPassShow] = useState('');\r\n  const [confPassShow, setConfPassShow] = useState('');\r\n  const [newPassShow, setNewPassShow] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isShow, setIsShow] = useState({ password: false, newPass: false, confPass: false });\r\n  useEffect(() => {\r\n    props.setHeader('Change Password');\r\n  }, [])\r\n  const handlePassworChange = (name, val) => {\r\n    if (name === \"password\") {\r\n      if (val && val.length > 0) {\r\n        let str = '';\r\n        const elem = document.getElementById('sampleChar');\r\n        let value = password;\r\n        for (var i = 0; i < val.length; i++) {\r\n          // str += '*';\r\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\r\n          str += elem.textContent;\r\n          if (val.length < password.length) {\r\n            value = value.substring(0, val.length)\r\n          } else if (i == val.length - 1) {\r\n            value += val[i];\r\n          }\r\n\r\n        }\r\n        setPassShow(str);\r\n        setPassword(value);\r\n      } else {\r\n        setPassShow('');\r\n        setPassword('');\r\n      }\r\n    }\r\n    if (name === \"confPass\") {\r\n      if (val && val.length > 0) {\r\n        let str = '';\r\n        const elem = document.getElementById('sampleChar');\r\n        let value = confirmPassword;\r\n        for (var i = 0; i < val.length; i++) {\r\n          // str += '*';\r\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\r\n          str += elem.textContent;\r\n          if (val.length < confirmPassword.length) {\r\n            value = value.substring(0, val.length)\r\n          } else if (i == val.length - 1) {\r\n            value += val[i];\r\n          }\r\n\r\n        }\r\n        setConfPassShow(str);\r\n        setConfirmPassword(value);\r\n      } else {\r\n        setConfPassShow('');\r\n        setConfirmPassword('');\r\n      }\r\n    }\r\n    if (name === \"newPass\") {\r\n      if (val && val.length > 0) {\r\n        let str = '';\r\n        const elem = document.getElementById('sampleChar');\r\n        let value = newPassword;\r\n        for (var i = 0; i < val.length; i++) {\r\n          // str += '*';\r\n          // str += String.fromCharCode(parseInt('U+000B7', 16));\r\n          str += elem.textContent;\r\n          if (val.length < newPassword.length) {\r\n            value = value.substring(0, val.length)\r\n          } else if (i == val.length - 1) {\r\n            value += val[i];\r\n          }\r\n\r\n        }\r\n        setNewPassShow(str);\r\n        setNewPassword(value);\r\n      } else {\r\n        setNewPassShow('');\r\n        setNewPassword('');\r\n      }\r\n    }\r\n  }\r\n\r\n  function setShow(name) {\r\n    const isShowTmp = { ...isShow };\r\n    if (name === \"password\") {\r\n      isShowTmp.password = !isShowTmp.password;\r\n    }\r\n    if (name === \"newPass\") {\r\n      isShowTmp.newPass = !isShowTmp.newPass;\r\n    }\r\n    if (name === \"confPass\") {\r\n      isShowTmp.confPass = !isShowTmp.confPass;\r\n    }\r\n    setIsShow(isShowTmp);\r\n  }\r\n  function onCancel() {\r\n    props.history.goBack();\r\n  }\r\n  const getErrorMsg = () => {\r\n    if (error || props.message) {\r\n      return (\r\n        <div className=\"errorMsg_login col-6\">\r\n          {error}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  const onSubmitClick = (e) => {\r\n    e.preventDefault();\r\n    if (!password) {\r\n      setError(\"Please enter your current password !\");\r\n      return false;\r\n    }\r\n    if (!newPassword) {\r\n      setError(\"Please enter your new password !\");\r\n      return false;\r\n    }\r\n    if (!confirmPassword) {\r\n      setError(\"Please confirm your new password !\");\r\n      return false;\r\n    }\r\n    if (confirmPassword != newPassword) {\r\n      setError(\"New Password and Confirm password must be same !\");\r\n      return false;\r\n    }\r\n    setError(\"\");\r\n    const req = {\r\n      userId: props.loggedInUser.userId,\r\n      password: password,\r\n      // newPassword: encrypt(this.state.newPwd),\r\n      newPassword: newPassword,\r\n      // confirmPassword: encrypt(this.state.confirmPwd)\r\n      confirmPassword: confirmPassword\r\n    }\r\n\r\n    props.ajaxUtil.sendRequest(props.urlConstants.CHANGE_PSWD_URL, req, (response, hasError) => {\r\n      if (!hasError) {\r\n        if (props.redirect) {\r\n          props.history.push(props.redirect);\r\n        }\r\n        else {\r\n          setPassword(\"\");\r\n          setNewPassword(\"\");\r\n          setConfirmPassword(\"\");\r\n          setPassShow('');\r\n          setConfPassShow('');\r\n          setNewPassShow('');\r\n          setIsShow({ password: false, newPass: false, confPass: false })\r\n        }\r\n      }\r\n    }, props.loadingFunction, { isShowSuccess: true, isProceedOnError: true });\r\n  }\r\n\r\n  return (\r\n    <div className=\"custom-container\">\r\n      <div className=\"form-Brick\">\r\n        <div className=\"form-Brick-Head\" />\r\n        <div id=\"sampleChar\" style={{ display: 'none' }}>&#183;</div>\r\n        <div className=\"form-Brick-body login-form\">\r\n          {getErrorMsg()}\r\n          <Row className=\"mx-0\">\r\n            <Col className=\"col-6\">\r\n              <InputGroup>\r\n                <Input onChange={(event) => handlePassworChange(\"password\", event.target.value)}\r\n                  value={isShow.password ? password : passShow}\r\n                />\r\n                <InputGroupAddon addonType=\"append\" style={{ lineHeight: '38px' }}><i className=\"fa fa-eye\" style={{ width: '21px' }} onClick={() => setShow(\"password\")}></i></InputGroupAddon>\r\n                <span className=\"floating-label\">Old password</span>\r\n              </InputGroup>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mx-0\">\r\n            <Col className=\"col-6\">\r\n              <InputGroup>\r\n                <Input onChange={(event) => handlePassworChange(\"newPass\", event.target.value)}\r\n                  value={isShow.newPass ? newPassword : newPassShow}\r\n                />\r\n                <InputGroupAddon addonType=\"append\" style={{ lineHeight: '38px' }}><i className=\"fa fa-eye\" style={{ width: '21px' }} onClick={() => setShow(\"newPass\")}></i></InputGroupAddon>\r\n                <span className=\"floating-label\">New password</span>\r\n              </InputGroup>\r\n            </Col>\r\n          </Row>\r\n          <Row className=\"mx-0\">\r\n            <Col className=\"col-6\">\r\n              <InputGroup>\r\n                <Input onChange={(event) => handlePassworChange(\"confPass\", event.target.value)}\r\n                  value={isShow.confPass ? confirmPassword : confPassShow}\r\n                />\r\n                <InputGroupAddon addonType=\"append\" style={{ lineHeight: '38px' }}><i className=\"fa fa-eye\" style={{ width: '21px' }} onClick={() => setShow(\"confPass\")}></i></InputGroupAddon>\r\n                <span className=\"floating-label\">Confirm new password</span>\r\n              </InputGroup>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </div>\r\n      <div className=\"container-fluid\">\r\n        <CustomButton\r\n          style={BUTTON_STYLE.BRICK}\r\n          type={BUTTON_TYPE.PRIMARY}\r\n          size={BUTTON_SIZE.LARGE}\r\n          align=\"right\"\r\n          label=\"Update\"\r\n          isButtonGroup={true}\r\n          onClick={onSubmitClick}\r\n        />\r\n        <CustomButton\r\n          style={BUTTON_STYLE.BRICK}\r\n          type={BUTTON_TYPE.SECONDARY}\r\n          size={BUTTON_SIZE.LARGE}\r\n          align=\"right\"\r\n          label=\"Cancel\"\r\n          isButtonGroup={true}\r\n          onClick={onCancel}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default withRouter(ChangePswd);"]},"metadata":{},"sourceType":"module"}