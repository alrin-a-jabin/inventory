{"ast":null,"code":"var _jsxFileName = \"/home/alrin/Downloads/INVENTORY22/src/components/login/LoginForm.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Container, Row, Col, InputGroup, InputGroupAddon, Input, Button } from 'reactstrap';\nimport _ from \"lodash\";\nimport { Link, Redirect } from 'react-router-dom';\nimport { ajaxUtil, setHeaderUtil, saveCurrentStateUtil, setNotification, setModalPopupUtil, setLoadingUtil, isComplexTab } from '../home/Utils';\nimport { LOGIN_URL, FIRST_LOGIN_URL } from '../../util/Constants';\nexport default function LoginForm(props) {\n  const [userName, setUserName] = useState();\n  const [password, setPassword] = useState('');\n  const [show, setShow] = useState('');\n  const [error, setError] = useState('');\n  const [showPass, setShowPass] = useState(false);\n  const [isShow, setIsShow] = useState(false);\n  const [otpRedirect, setOtpRedirect] = useState(false);\n  const [serviceId, setServiceId] = useState();\n\n  const handlePassworChange = val => {\n    if (val && val.length > 0) {\n      let str = '';\n      const elem = document.getElementById('sampleChar');\n      let value = password;\n\n      for (var i = 0; i < val.length; i++) {\n        // str += '*';\n        // str += String.fromCharCode(parseInt('U+000B7', 16));\n        str += elem.textContent;\n\n        if (val.length < password.length) {\n          value = value.substring(0, val.length);\n        } else if (i == val.length - 1) {\n          value += val[i];\n        }\n      }\n\n      setShow(str);\n      setPassword(isShow ? val : value);\n    } else {\n      setShow('');\n      setPassword('');\n    }\n  };\n\n  const height = useWindowHeight();\n\n  const handleLoginSubmit = e => {\n    e.preventDefault();\n\n    if (!userName) {\n      setError(\"Please Enter User Name !\");\n      return false;\n    }\n\n    if (!password) {\n      setError(\"Please Enter Password !\");\n      return false;\n    }\n\n    setError('');\n    props.onSubmit(userName, password);\n  };\n\n  const formContainerRef = useRef(null);\n  let formHeight = 414;\n  useEffect(() => {\n    formHeight = formContainerRef.current.offsetHeight;\n  }, []);\n\n  const getErrorMsg = () => {\n    if (error || props.message) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: _.isEmpty(error) && _.isEmpty(props.login.error) ? 'successMsg_login' : 'errorMsg_login',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, error || props.message);\n    }\n  };\n\n  const validateUser = e => {\n    e.preventDefault();\n    setError(\"\");\n\n    if (!userName) {\n      setError(\"Please Enter User Name !\");\n      return false;\n    }\n\n    const req = {\n      userID: userName\n    };\n    ajaxUtil.sendRequest(FIRST_LOGIN_URL, req, (response, hasError) => {\n      if (!hasError && response) {\n        if (response.firstTime) {\n          setServiceId(102);\n          setOtpRedirect(true);\n        } else setShowPass(true);\n      } else if (response && response.message) {\n        setError(response.message);\n      } else {\n        setError(\"Oops! Something went wrong Please try again \");\n      }\n    }, setLoadingUtil, {\n      method: 'GET',\n      isShowSuccess: false,\n      isLogout: false\n    });\n  };\n\n  if (otpRedirect) return /*#__PURE__*/React.createElement(Redirect, {\n    to: `/forgetPassword/${userName}/${serviceId}`,\n    push: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 16\n    }\n  });\n  return /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 6,\n    lg: 8,\n    style: {\n      height: `${height}px`\n    },\n    className: \"bg-secondary login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Col, {\n    xs: 6,\n    lg: 4,\n    className: \"primary-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo-container position-relative\",\n    style: {\n      height: `${(height - formHeight) / 2}px`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: `${process.env.PUBLIC_URL}/images/logo/logoWhite.png`,\n    alt: \"Smartfren\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"sampleChar\",\n    style: {\n      display: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }, \"\\xB7\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form-container bg-white\",\n    ref: formContainerRef,\n    style: {\n      marginLeft: '-232.5px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fw-600\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 37\n    }\n  }, \"Distribution Management System\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: showPass ? handleLoginSubmit : validateUser,\n    className: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  }, getErrorMsg(), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: '#495057',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    onChange: !showPass ? event => setUserName(event.target.value) : '',\n    value: userName,\n    autoComplete: \"new-username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    style: {\n      lineHeight: '38px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 46\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-user-o\",\n    style: {\n      width: '21px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 113\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"floating-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 45\n    }\n  }, \"User Name\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pt-1\",\n    style: {\n      color: '#495057',\n      cursor: 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 37\n    }\n  }, showPass && /*#__PURE__*/React.createElement(InputGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 54\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    style: {\n      fontWeight: 600\n    },\n    onChange: event => handlePassworChange(event.target.value),\n    value: isShow ? password : show,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(InputGroupAddon, {\n    addonType: \"append\",\n    style: {\n      lineHeight: '38px'\n    },\n    onClick: () => setIsShow(!isShow),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-eye\",\n    style: {\n      width: '21px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 147\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"floating-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 45\n    }\n  }, \"Password\"))), props.isLoading ? /*#__PURE__*/React.createElement(Button, {\n    className: \"w-100 login-button primary-background\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 47\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-spinner fa-spin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 49\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 90\n    }\n  }, \" authenticating...\")) : showPass ? /*#__PURE__*/React.createElement(Button, {\n    className: \"w-100 login-button c-pointer primary-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 49\n    }\n  }, \"Login\") : /*#__PURE__*/React.createElement(Button, {\n    className: \"w-100 login-button c-pointer primary-background\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 49\n    }\n  }, \"Next\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-form-footer row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 37\n    }\n  }, showPass && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-left col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    onClick: () => setShowPass(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 49\n    }\n  }, \"Login Page\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-end col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    onClick: () => {\n      setServiceId(103);\n      setOtpRedirect(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 49\n    }\n  }, \"Forgot Password\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo-container position-relative\",\n    style: {\n      height: `${(height - formHeight) / 2}px`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 33\n    }\n  }, \"Smartfren \\xA92020. All Rights Reserved\")))))));\n}\n\nfunction useWindowHeight() {\n  const [height, setHeight] = useState(window.innerHeight);\n  useEffect(() => {\n    const handleResize = () => setHeight(window.innerHeight);\n\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return height;\n}","map":{"version":3,"sources":["/home/alrin/Downloads/INVENTORY22/src/components/login/LoginForm.js"],"names":["React","useState","useEffect","useRef","Container","Row","Col","InputGroup","InputGroupAddon","Input","Button","_","Link","Redirect","ajaxUtil","setHeaderUtil","saveCurrentStateUtil","setNotification","setModalPopupUtil","setLoadingUtil","isComplexTab","LOGIN_URL","FIRST_LOGIN_URL","LoginForm","props","userName","setUserName","password","setPassword","show","setShow","error","setError","showPass","setShowPass","isShow","setIsShow","otpRedirect","setOtpRedirect","serviceId","setServiceId","handlePassworChange","val","length","str","elem","document","getElementById","value","i","textContent","substring","height","useWindowHeight","handleLoginSubmit","e","preventDefault","onSubmit","formContainerRef","formHeight","current","offsetHeight","getErrorMsg","message","isEmpty","login","validateUser","req","userID","sendRequest","response","hasError","firstTime","method","isShowSuccess","isLogout","process","env","PUBLIC_URL","display","marginLeft","color","cursor","event","target","lineHeight","width","fontWeight","isLoading","setHeight","window","innerHeight","handleResize","addEventListener","removeEventListener"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport {\r\n    Container,\r\n    Row,\r\n    Col,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    Input,\r\n    Button\r\n} from 'reactstrap';\r\nimport _ from \"lodash\";\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport { ajaxUtil, setHeaderUtil, saveCurrentStateUtil, setNotification, setModalPopupUtil, setLoadingUtil, isComplexTab } from '../home/Utils';\r\nimport { LOGIN_URL, FIRST_LOGIN_URL } from '../../util/Constants';\r\n\r\nexport default function LoginForm(props) {\r\n    const [userName, setUserName] = useState();\r\n    const [password, setPassword] = useState('');\r\n    const [show, setShow] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [showPass, setShowPass] = useState(false);\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [otpRedirect, setOtpRedirect] = useState(false);\r\n    const [serviceId,setServiceId]=useState();\r\n\r\n    const handlePassworChange = val => {\r\n        if (val && val.length > 0) {\r\n            let str = '';\r\n            const elem = document.getElementById('sampleChar');\r\n            let value = password;\r\n            for (var i = 0; i < val.length; i++) {\r\n                // str += '*';\r\n                // str += String.fromCharCode(parseInt('U+000B7', 16));\r\n                str += elem.textContent;\r\n                if (val.length < password.length) {\r\n                    value = value.substring(0, val.length)\r\n                } else if (i == val.length - 1) {\r\n                    value += val[i];\r\n                }\r\n\r\n            }\r\n            setShow(str);\r\n            setPassword(isShow?val:value);\r\n        } else {\r\n            setShow('');\r\n            setPassword('');\r\n        }\r\n    };\r\n\r\n    const height = useWindowHeight();\r\n    const handleLoginSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!userName) {\r\n            setError(\"Please Enter User Name !\");\r\n            return false;\r\n        }\r\n        if (!password) {\r\n            setError(\"Please Enter Password !\");\r\n            return false;\r\n        }\r\n        setError('');\r\n        props.onSubmit(userName, password);\r\n    };\r\n    const formContainerRef = useRef(null);\r\n    let formHeight = 414;\r\n    useEffect(() => {\r\n        formHeight = formContainerRef.current.offsetHeight;\r\n    }, []);\r\n    const getErrorMsg = () => {\r\n        if (error || props.message) {\r\n            return (\r\n                <div className={_.isEmpty(error) && _.isEmpty(props.login.error) ? 'successMsg_login' : 'errorMsg_login'}>\r\n                    {error || props.message}\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n    const validateUser = (e) => {\r\n        e.preventDefault();\r\n        setError(\"\");\r\n        if (!userName) {\r\n            setError(\"Please Enter User Name !\");\r\n            return false;\r\n        }\r\n        const req={\r\n            userID:userName\r\n        }\r\n        ajaxUtil.sendRequest(FIRST_LOGIN_URL, req, (response, hasError) => {\r\n            if (!hasError && response) {\r\n                if (response.firstTime){\r\n                    setServiceId(102);\r\n                    setOtpRedirect(true)\r\n                }else\r\n                    setShowPass(true)\r\n            } else if (response && response.message) {\r\n                setError(response.message);\r\n            } else {\r\n                setError(\"Oops! Something went wrong Please try again \");\r\n            }        \r\n\r\n        }, setLoadingUtil, {method:'GET',isShowSuccess: false, isLogout: false });\r\n    }\r\n    if (otpRedirect)\r\n        return <Redirect to={`/forgetPassword/${userName}/${serviceId}`} push />\r\n\r\n    return (\r\n        <Container fluid>\r\n            <Row>\r\n                <Col xs={6} lg={8} style={{ height: `${height}px` }} className=\"bg-secondary login-container\"></Col>\r\n                <Col xs={6} lg={4} className=\"primary-background\">\r\n                    <div>\r\n                        <div>\r\n                            <div className=\"logo-container position-relative\" style={{ height: `${(height - formHeight) / 2}px` }}>\r\n                                <img src={`${process.env.PUBLIC_URL}/images/logo/logoWhite.png`} alt=\"Smartfren\" />\r\n                            </div>\r\n                            <div id=\"sampleChar\" style={{ display: 'none' }}>&#183;</div>\r\n                            {/* login form starts here */}\r\n                            <div className=\"login-form-container bg-white\" ref={formContainerRef} style={{ marginLeft: '-232.5px' }}>\r\n                                <div className=\"login-form-header\">\r\n                                    <span className=\"fw-600\">Distribution Management System</span>\r\n                                </div>\r\n                                <form onSubmit={showPass ? handleLoginSubmit : validateUser} className=\"login-form\">\r\n                                    {getErrorMsg()}\r\n                                    <div style={{ color: '#495057', cursor: 'pointer' }}>\r\n                                        <InputGroup>\r\n                                            <Input onChange={!showPass ? (event) => setUserName(event.target.value) : ''}\r\n                                                value={userName} autoComplete=\"new-username\"\r\n                                            />\r\n                                            {<InputGroupAddon addonType=\"append\" style={{ lineHeight: '38px' }}><i className=\"fa fa-user-o\" style={{ width: '21px' }} ></i></InputGroupAddon>}\r\n                                            <span className=\"floating-label\">User Name</span>\r\n                                        </InputGroup>\r\n                                    </div>\r\n                                    <div className=\"pt-1\" style={{ color: '#495057', cursor: 'pointer' }}>\r\n                                        {showPass && <InputGroup>\r\n                                            <Input style={{ fontWeight: 600 }} onChange={(event) => handlePassworChange(event.target.value)} value={isShow ? password : show} />\r\n                                            <InputGroupAddon addonType=\"append\" style={{ lineHeight: '38px' }} onClick={() => setIsShow(!isShow)}><i className=\"fa fa-eye\" style={{ width: '21px' }} ></i></InputGroupAddon>\r\n                                            <span className=\"floating-label\">Password</span>\r\n                                        </InputGroup>}\r\n                                    </div>\r\n                                    {\r\n                                        props.isLoading\r\n                                            ? <Button className=\"w-100 login-button primary-background\" disabled>\r\n                                                <i className=\"fa fa-spinner fa-spin\"></i><span> authenticating...</span>\r\n                                            </Button>\r\n                                            : showPass ?\r\n                                                <Button className=\"w-100 login-button c-pointer primary-background\">Login</Button>\r\n                                                :\r\n                                                <Button className=\"w-100 login-button c-pointer primary-background\">Next</Button>}\r\n                                    <div className=\"login-form-footer row\">\r\n                                        {showPass &&<> \r\n                                            <div className=\"d-flex justify-content-left col\">\r\n                                                <a href=\"#\" onClick={() => setShowPass(false)}>Login Page</a>\r\n                                            </div>\r\n                                            <div className=\"d-flex justify-content-end col\">\r\n                                                <a href=\"#\" onClick={() =>{ \r\n                                                    setServiceId(103)\r\n                                                    setOtpRedirect(true)}}>Forgot Password</a>\r\n                                            </div>\r\n                                        </>\r\n                                        }\r\n                                    </div>\r\n                                </form>\r\n                            </div>\r\n\r\n                            <div className=\"logo-container position-relative\" style={{ height: `${(height - formHeight) / 2}px` }}>\r\n                                <span>Smartfren ©2020. All Rights Reserved</span>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n\r\n        </Container>\r\n    )\r\n}\r\n\r\n\r\nfunction useWindowHeight() {\r\n    const [height, setHeight] = useState(window.innerHeight);\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => setHeight(window.innerHeight);\r\n        window.addEventListener('resize', handleResize);\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize);\r\n        };\r\n    }, []);\r\n\r\n    return height;\r\n}"]},"metadata":{},"sourceType":"module"}