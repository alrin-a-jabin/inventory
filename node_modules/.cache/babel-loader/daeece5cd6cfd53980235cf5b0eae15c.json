{"ast":null,"code":"var _jsxFileName = \"/home/alrin/reactproject/kms-ui/src/components/MBookLet/Components/MaterialList/AddMaterial.js\";\nimport React, { Component } from 'react';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport axios from 'axios';\nexport default class AddMaterialModel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDrag = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    this.handleDragIn = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    this.handleDragOut = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    this.onHandleChange = event => {\n      let selectedMaterial = this.state.selectedMaterial;\n      selectedMaterial[event.currentTarget.name] = event.currentTarget.value;\n      this.setState({\n        selectedMaterial\n      });\n    };\n\n    this.onFileChange = event => {\n      this.setState({\n        file: event.target.files[0]\n      });\n    };\n\n    this.handleDrop = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.setState({\n        file: e.dataTransfer.files[0]\n      });\n    };\n\n    this.submitForm = () => {\n      let error = false;\n      Object.keys(this.state.selectedMaterial).forEach(material => {\n        if (this.state.selectedMaterial[material].trim().length <= 0) {\n          error = true;\n        }\n      });\n\n      if (error || Object.keys(this.state.selectedMaterial).length <= 0) {\n        this.props.setNotification({\n          message: 'Please fill the form',\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n        return;\n      }\n\n      if (!this.state.file['name']) {\n        this.props.setNotification({\n          message: 'Please Select A File ',\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n        return;\n      }\n\n      let data = {\n        material_type: this.state.selectedMaterial.materialType,\n        material_category: this.state.selectedMaterial.category,\n        subject_id: '5',\n        module_id: '6',\n        material_id: \"\",\n        material_name: this.state.selectedMaterial.materialName\n      };\n      this.props.ajaxUtil.sendRequest(this.props.url_Booklet.CREATE_MBOOKLET, data, response => {\n        if (response.status) {\n          this.setState({\n            materialId: response.message\n          }, () => {\n            this.doFileUpload();\n          });\n          this.props.setNotification({\n            message: 'Uploading File',\n            hasError: false,\n            timestamp: new Date().getTime()\n          }); // this.props.getMaterialList();\n          // this.props.closeAddMaterialPopup();\n        } else {\n          this.props.setNotification({\n            message: response.message,\n            hasError: true,\n            timestamp: new Date().getTime()\n          });\n        }\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.doFileUpload = () => {\n      const data = new FormData();\n      data.append('file_name[]', this.state.file);\n      data.append('material_id', this.state.materialId);\n      data.append('status', 1);\n      data.append('description[]', [this.state.selectedMaterial.fileDescription]);\n      data.append('topic[]', [this.state.selectedMaterial.fileName]);\n      data.append('type[]', ['Text']);\n      data.append('file', this.state.file);\n      const url = this.props.url_Booklet.UPLOAD_MATERIAL_FILE;\n      this.props.ajaxUtil.sendRequest(url, data, response => {\n        if (response.status) {\n          this.props.getMaterialList();\n          this.props.closeAddMaterialPopup();\n        }\n\n        this.props.setNotification({\n          message: response.message,\n          hasError: !response.status,\n          timestamp: new Date().getTime()\n        });\n      }, this.props.loadingFunction, {\n        method: 'POST',\n        isShowSuccess: false\n      });\n    };\n\n    this.state = {\n      uploadDiv: React.createRef(),\n      file: {},\n      materialId: null,\n      selectedMaterial: {\n        materialName: '',\n        materialType: 'mBooklet',\n        fileName: '',\n        category: '',\n        fileDescription: ''\n      },\n      newMaterial: {}\n    };\n  }\n\n  componentDidMount() {\n    // this.getChannels();\n    let div = this.state.uploadDiv.current;\n    div.addEventListener('dragenter', this.handleDragIn);\n    div.addEventListener('dragleave', this.handleDragOut);\n    div.addEventListener('dragover', this.handleDrag);\n    div.addEventListener('drop', this.handleDrop);\n  }\n\n  componentWillUnmount() {\n    let div = this.state.uploadDiv.current;\n    div.removeEventListener('dragenter', this.handleDragIn);\n    div.removeEventListener('dragleave', this.handleDragOut);\n    div.removeEventListener('dragover', this.handleDrag);\n    div.removeEventListener('drop', this.handleDrop);\n  }\n\n  render() {\n    const {\n      closeAddMaterialPopup\n    } = this.props;\n    const {\n      onHandleChange,\n      onFileChange,\n      submitForm\n    } = this;\n    const {\n      uploadDiv,\n      selectedMaterial,\n      file\n    } = this.state;\n    return /*#__PURE__*/React.createElement(PerfectScrollbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      action: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" form-group mb-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 19\n      }\n    }, \"Material Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: selectedMaterial.materialName,\n      onChange: event => onHandleChange(event),\n      className: \"form-control required\",\n      name: \"materialName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, \"Material Type\"), /*#__PURE__*/React.createElement(\"select\", {\n      value: selectedMaterial.materialType,\n      onChange: event => onHandleChange(event),\n      className: \"form-control required\",\n      name: \"materialType\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, \"Please Select\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"mBooklet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }, \"mBooklet\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group mb-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, \"M-booklet type\"), /*#__PURE__*/React.createElement(\"select\", {\n      value: selectedMaterial.category,\n      onChange: event => onHandleChange(event),\n      className: \"form-control required\",\n      name: \"category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 21\n      }\n    }, \"Please Select\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    }, \"Product\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"video on demand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, \"Video on demand\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"programs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, \"Programs\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"tips & tricks\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 21\n      }\n    }, \"Tips & Tricks\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"Q&A\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    }, \"Q&A\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" form-group mb-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 19\n      }\n    }, \"File Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      value: selectedMaterial.fileName,\n      onChange: event => onHandleChange(event),\n      className: \"form-control required\",\n      name: \"fileName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" form-group mb-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 19\n      }\n    }, \"File Description\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      rows: \"2\",\n      value: selectedMaterial.fileDescription,\n      onChange: event => onHandleChange(event),\n      className: \"form-control required\",\n      name: \"fileDescription\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      ref: uploadDiv,\n      className: \"Drag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    }, \"Drag & drop your files here\"), file['name'], /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"file\",\n      id: \"fileElem\",\n      onChange: onFileChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"button\",\n      htmlFor: \"fileElem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 19\n      }\n    }, \"Select some files\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 19\n      }\n    }, \"File Format .doc, . Pdf Supported\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12  mt-3 mb-3 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: closeAddMaterialPopup,\n      type: \"button\",\n      className: \"btn btn-danger cancel \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => {},\n      type: \"button\",\n      className: \"btn btn-danger reset \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 15\n      }\n    }, \"Reset\"), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => submitForm(),\n      type: \"button\",\n      className: \"btn btn-danger add \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }, \" Add\")))));\n  }\n\n}","map":{"version":3,"sources":["/home/alrin/reactproject/kms-ui/src/components/MBookLet/Components/MaterialList/AddMaterial.js"],"names":["React","Component","PerfectScrollbar","axios","AddMaterialModel","constructor","props","handleDrag","e","preventDefault","stopPropagation","handleDragIn","handleDragOut","onHandleChange","event","selectedMaterial","state","currentTarget","name","value","setState","onFileChange","file","target","files","handleDrop","dataTransfer","submitForm","error","Object","keys","forEach","material","trim","length","setNotification","message","hasError","timestamp","Date","getTime","data","material_type","materialType","material_category","category","subject_id","module_id","material_id","material_name","materialName","ajaxUtil","sendRequest","url_Booklet","CREATE_MBOOKLET","response","status","materialId","doFileUpload","loadingFunction","method","isShowSuccess","FormData","append","fileDescription","fileName","url","UPLOAD_MATERIAL_FILE","getMaterialList","closeAddMaterialPopup","uploadDiv","createRef","newMaterial","componentDidMount","div","current","addEventListener","componentWillUnmount","removeEventListener","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport axios from 'axios';\n\nexport default class AddMaterialModel extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      uploadDiv: React.createRef(),\n      file: {\n\n      },\n      materialId: null,\n      selectedMaterial: {\n        materialName: '',\n        materialType: 'mBooklet',\n        fileName: '',\n        category: '',\n        fileDescription: ''\n      },\n      newMaterial: {\n\n      }\n    }\n  }\n  componentDidMount() {\n    // this.getChannels();\n    let div = this.state.uploadDiv.current\n    div.addEventListener('dragenter', this.handleDragIn)\n    div.addEventListener('dragleave', this.handleDragOut)\n    div.addEventListener('dragover', this.handleDrag)\n    div.addEventListener('drop', this.handleDrop)\n  }\n  componentWillUnmount() {\n    let div = this.state.uploadDiv.current\n    div.removeEventListener('dragenter', this.handleDragIn)\n    div.removeEventListener('dragleave', this.handleDragOut)\n    div.removeEventListener('dragover', this.handleDrag)\n    div.removeEventListener('drop', this.handleDrop)\n  }\n  handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  handleDragIn = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  handleDragOut = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  onHandleChange = (event) => {\n    let selectedMaterial = this.state.selectedMaterial;\n    selectedMaterial[event.currentTarget.name] = event.currentTarget.value;\n    this.setState({ selectedMaterial });\n  }\n  onFileChange = (event) => {\n\n    this.setState({ file: event.target.files[0] })\n  }\n  handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.setState({ file: e.dataTransfer.files[0] })\n  }\n  submitForm = () => {\n    let error = false;\n    Object.keys(this.state.selectedMaterial).forEach((material) => {\n      if (this.state.selectedMaterial[material].trim().length <= 0) {\n        error = true;\n      }\n    })\n    if (error || Object.keys(this.state.selectedMaterial).length <= 0) {\n      this.props.setNotification({\n        message: 'Please fill the form',\n        hasError: true,\n        timestamp: new Date().getTime()\n      });\n      return;\n    }\n    if (!this.state.file['name']) {\n      this.props.setNotification({\n        message: 'Please Select A File ',\n        hasError: true,\n        timestamp: new Date().getTime()\n      });\n      return;\n    }\n    let data = {\n      material_type: this.state.selectedMaterial.materialType,\n      material_category: this.state.selectedMaterial.category,\n      subject_id: '5',\n      module_id: '6',\n      material_id: \"\",\n      material_name: this.state.selectedMaterial.materialName,\n    }\n\n    this.props.ajaxUtil.sendRequest(this.props.url_Booklet.CREATE_MBOOKLET, data, response => {\n\n\n      if (response.status) {\n        this.setState({ materialId: response.message }, () => {\n          this.doFileUpload()\n        })\n\n        this.props.setNotification({\n          message: 'Uploading File',\n          hasError: false,\n          timestamp: new Date().getTime()\n        });\n        // this.props.getMaterialList();\n        // this.props.closeAddMaterialPopup();\n      } else {\n        this.props.setNotification({\n          message: response.message,\n          hasError: true,\n          timestamp: new Date().getTime()\n        });\n      }\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n  }\n  doFileUpload = () => {\n    const data = new FormData()\n    data.append('file_name[]', this.state.file);\n    data.append('material_id', this.state.materialId)\n    data.append('status', 1)\n    data.append('description[]', [this.state.selectedMaterial.fileDescription])\n    data.append('topic[]', [this.state.selectedMaterial.fileName])\n    data.append('type[]', ['Text'])\n\n\n    data.append('file', this.state.file)\n    const url = this.props.url_Booklet.UPLOAD_MATERIAL_FILE;\n    this.props.ajaxUtil.sendRequest(url, data, response => {\n      if (response.status) {\n        this.props.getMaterialList();\n        this.props.closeAddMaterialPopup();\n      }\n      this.props.setNotification({\n        message: response.message,\n        hasError: !response.status,\n        timestamp: new Date().getTime()\n      });\n    }, this.props.loadingFunction,\n      { method: 'POST', isShowSuccess: false });\n  }\n\n  render() {\n    const { closeAddMaterialPopup } = this.props;\n    const { onHandleChange, onFileChange, submitForm } = this;\n    const { uploadDiv, selectedMaterial, file } = this.state;\n    return (\n      <PerfectScrollbar>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-md-6\">\n              <form action>\n                <div className=\" form-group mb-30\">\n                  <label>Material Name</label>\n                  <input\n                    value={selectedMaterial.materialName}\n                    onChange={(event) => onHandleChange(event)}\n                    className=\"form-control required\"\n                    name=\"materialName\" />\n\n                </div>\n                <div className=\"form-group mb-30\">\n                  <label>Material Type</label>\n                  <select\n                    value={selectedMaterial.materialType}\n                    onChange={(event) => onHandleChange(event)}\n                    className=\"form-control required\"\n                    name=\"materialType\">\n                    <option value=\"\">Please Select</option>\n                    <option value=\"mBooklet\">mBooklet</option>\n                  </select>\n                </div>\n                <div className=\"form-group mb-30\">\n                  <label>M-booklet type</label>\n                  <select\n                    value={selectedMaterial.category}\n                    onChange={(event) => onHandleChange(event)}\n                    className=\"form-control required\"\n                    name=\"category\">\n                    <option value=\"\">Please Select</option>\n                    <option value=\"product\">Product</option>\n                    <option value=\"video on demand\">Video on demand</option>\n                    <option value=\"programs\">Programs</option>\n                    <option value=\"tips & tricks\">Tips & Tricks</option>\n                    <option value=\"Q&A\">Q&A</option>\n                  </select>\n                </div>\n                <div className=\" form-group mb-30\">\n                  <label>File Name</label>\n                  <input\n                    value={selectedMaterial.fileName}\n                    onChange={(event) => onHandleChange(event)}\n                    className=\"form-control required\"\n                    name=\"fileName\" />\n\n                </div>\n                <div className=\" form-group mb-30\">\n                  <label>File Description</label>\n                  <textarea\n                    rows=\"2\"\n                    value={selectedMaterial.fileDescription}\n                    onChange={(event) => onHandleChange(event)}\n                    className=\"form-control required\"\n                    name=\"fileDescription\" ></textarea>\n\n                </div>\n                <div ref={uploadDiv} className=\"Drag\">\n                  <h6>Drag &amp; drop your files here</h6>\n                  {file['name']}\n                  <br />\n                  <input type=\"file\" id=\"fileElem\" onChange={onFileChange} />\n                  <label className=\"button\" htmlFor=\"fileElem\">Select some files</label>\n                  <p>File Format .doc, . Pdf Supported</p>\n                </div>\n              </form>\n            </div>\n            <div className=\"col-md-6\"></div>\n            <div className=\"col-md-12  mt-3 mb-3 text-right\">\n\n              <button\n                onClick={closeAddMaterialPopup}\n                type=\"button\"\n                className=\"btn btn-danger cancel \">Cancel</button>\n              <button\n                onClick={() => { }}\n                type=\"button\"\n                className=\"btn btn-danger reset \">Reset</button>\n              <button\n                onClick={() => submitForm()}\n                type=\"button\"\n                className=\"btn btn-danger add \"> Add</button>\n\n            </div>\n\n          </div>\n        </div>\n      </PerfectScrollbar>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}