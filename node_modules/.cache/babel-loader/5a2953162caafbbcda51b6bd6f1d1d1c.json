{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nexports.default = useFieldItem;\n\nvar _FormValidator = require('../formValidator/FormValidator');\n\nvar _react = require('react');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction useFieldItem(FIELDS) {\n  var initialValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var preValidation = options.preValidation,\n      postValidation = options.postValidation,\n      onValueChange = options.onValueChange;\n\n  var _useState = (0, _react.useState)(initialValues),\n      _useState2 = _slicedToArray(_useState, 2),\n      values = _useState2[0],\n      setValues = _useState2[1];\n\n  var _useState3 = (0, _react.useState)({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fields = _useState4[0],\n      setFields = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    if (!_lodash2.default.isEmpty(initialValues)) setValues(initialValues);\n  }, [initialValues]);\n\n  var changeHandler = function changeHandler(name, value, obj) {\n    var _ref = obj || {\n      isTouched: false\n    },\n        isTouched = _ref.isTouched;\n\n    if (isTouched) {\n      // value = values[name];\n      return false;\n    }\n\n    var fieldValues = _extends({}, fields);\n\n    if (FIELDS[name]) {\n      var validate = (0, _FormValidator.validateForm)(name, value, FIELDS[name], preValidation, postValidation);\n\n      if (validate) {\n        fieldValues[name] = validate;\n      } else {\n        fieldValues[name] = {\n          hasError: false,\n          errorMsg: ''\n        };\n      }\n    }\n\n    var _ref2 = onValueChange ? onValueChange(name, value, values, fieldValues) : [],\n        _ref3 = _slicedToArray(_ref2, 1),\n        _ref3$ = _ref3[0],\n        newValues = _ref3$ === undefined ? null : _ref3$;\n\n    setValues(function (values) {\n      if (newValues != null) return newValues;\n      return _extends({}, values, _defineProperty({}, name, value));\n    });\n    setFields(fieldValues);\n\n    if (isTouched && fields[name] && fields[name].hasError) {\n      setFields(fields);\n      return false;\n    }\n  };\n\n  var validator = function validator(keys) {\n    var removedKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    var fieldValues = _extends({}, fields);\n\n    if (removedKeys.length > 0) {\n      removedKeys.map(function (key) {\n        fieldValues[key] = {\n          hasError: false,\n          errorMsg: ''\n        };\n      });\n    }\n\n    keys.map(function (key) {\n      var validate = (0, _FormValidator.validateForm)(key, values[key], FIELDS[key], preValidation, postValidation);\n\n      if (validate) {\n        fieldValues[key] = validate;\n      } else {\n        fieldValues[key] = {\n          hasError: false,\n          errorMsg: ''\n        };\n      }\n    });\n    var hasError = fieldValues ? Object.values(fieldValues).some(function (f) {\n      return f.hasError;\n    }) : false;\n    setFields(fieldValues);\n    return hasError;\n  };\n\n  var valuesReset = function valuesReset() {\n    setValues(initialValues);\n    setFields({});\n  };\n\n  var updateValues = function updateValues(newValue) {\n    if (newValue) {\n      Object.keys(newValue).map(function (val) {\n        return changeHandler(val, newValue[val], {});\n      });\n      setValues(function (values) {\n        return _extends({}, values, newValue);\n      });\n    }\n  };\n\n  var handleChange = (0, _react.useCallback)(changeHandler, [FIELDS, values, fields]);\n  var validateValues = (0, _react.useCallback)(validator, [FIELDS, values, fields]);\n  var reset = (0, _react.useCallback)(valuesReset, [FIELDS, values, fields]);\n  var updateValue = (0, _react.useCallback)(updateValues, [FIELDS, values, fields]);\n  return [values, fields, handleChange, {\n    validateValues: validateValues,\n    reset: reset,\n    updateValue: updateValue\n  }];\n}","map":{"version":3,"sources":["/home/alrin/Downloads/INVENTORY22/node_modules/@6d-ui/fields/build/elements/fieldItem/UseFieldItem.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","err","Array","isArray","TypeError","default","useFieldItem","_FormValidator","require","_react","_lodash","_lodash2","_interopRequireDefault","obj","__esModule","_defineProperty","enumerable","configurable","writable","FIELDS","initialValues","options","preValidation","postValidation","onValueChange","_useState","useState","_useState2","values","setValues","_useState3","_useState4","fields","setFields","useEffect","isEmpty","changeHandler","name","_ref","isTouched","fieldValues","validate","validateForm","hasError","errorMsg","_ref2","_ref3","_ref3$","newValues","validator","keys","removedKeys","map","some","f","valuesReset","updateValues","newValue","val","handleChange","useCallback","validateValues","reset","updateValue"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nexports.default = useFieldItem;\n\nvar _FormValidator = require('../formValidator/FormValidator');\n\nvar _react = require('react');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction useFieldItem(FIELDS) {\n    var initialValues = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var preValidation = options.preValidation,\n        postValidation = options.postValidation,\n        onValueChange = options.onValueChange;\n\n    var _useState = (0, _react.useState)(initialValues),\n        _useState2 = _slicedToArray(_useState, 2),\n        values = _useState2[0],\n        setValues = _useState2[1];\n\n    var _useState3 = (0, _react.useState)({}),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fields = _useState4[0],\n        setFields = _useState4[1];\n\n    (0, _react.useEffect)(function () {\n        if (!_lodash2.default.isEmpty(initialValues)) setValues(initialValues);\n    }, [initialValues]);\n\n    var changeHandler = function changeHandler(name, value, obj) {\n        var _ref = obj || {\n            isTouched: false\n        },\n            isTouched = _ref.isTouched;\n\n        if (isTouched) {\n            // value = values[name];\n            return false;\n        }\n\n        var fieldValues = _extends({}, fields);\n\n        if (FIELDS[name]) {\n            var validate = (0, _FormValidator.validateForm)(name, value, FIELDS[name], preValidation, postValidation);\n            if (validate) {\n                fieldValues[name] = validate;\n            } else {\n                fieldValues[name] = {\n                    hasError: false,\n                    errorMsg: ''\n                };\n            }\n        }\n\n        var _ref2 = onValueChange ? onValueChange(name, value, values, fieldValues) : [],\n            _ref3 = _slicedToArray(_ref2, 1),\n            _ref3$ = _ref3[0],\n            newValues = _ref3$ === undefined ? null : _ref3$;\n\n        setValues(function (values) {\n            if (newValues != null) return newValues;\n\n            return _extends({}, values, _defineProperty({}, name, value));\n        });\n        setFields(fieldValues);\n\n        if (isTouched && fields[name] && fields[name].hasError) {\n            setFields(fields);\n            return false;\n        }\n    };\n\n    var validator = function validator(keys) {\n        var removedKeys = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        var fieldValues = _extends({}, fields);\n        if (removedKeys.length > 0) {\n            removedKeys.map(function (key) {\n                fieldValues[key] = {\n                    hasError: false,\n                    errorMsg: ''\n                };\n            });\n        }\n        keys.map(function (key) {\n            var validate = (0, _FormValidator.validateForm)(key, values[key], FIELDS[key], preValidation, postValidation);\n            if (validate) {\n                fieldValues[key] = validate;\n            } else {\n                fieldValues[key] = {\n                    hasError: false,\n                    errorMsg: ''\n                };\n            }\n        });\n        var hasError = fieldValues ? Object.values(fieldValues).some(function (f) {\n            return f.hasError;\n        }) : false;\n        setFields(fieldValues);\n        return hasError;\n    };\n\n    var valuesReset = function valuesReset() {\n        setValues(initialValues);\n        setFields({});\n    };\n\n    var updateValues = function updateValues(newValue) {\n        if (newValue) {\n            Object.keys(newValue).map(function (val) {\n                return changeHandler(val, newValue[val], {});\n            });\n            setValues(function (values) {\n                return _extends({}, values, newValue);\n            });\n        }\n    };\n\n    var handleChange = (0, _react.useCallback)(changeHandler, [FIELDS, values, fields]);\n\n    var validateValues = (0, _react.useCallback)(validator, [FIELDS, values, fields]);\n\n    var reset = (0, _react.useCallback)(valuesReset, [FIELDS, values, fields]);\n\n    var updateValue = (0, _react.useCallback)(updateValues, [FIELDS, values, fields]);\n\n    return [values, fields, handleChange, { validateValues: validateValues, reset: reset, updateValue: updateValue }];\n}"]},"metadata":{},"sourceType":"script"}