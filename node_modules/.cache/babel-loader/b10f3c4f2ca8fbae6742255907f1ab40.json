{"ast":null,"code":"var _jsxFileName = \"/home/alrin/reactproject/kms-ui/src/components/module/Modal/MaterialList.js\";\nimport React, { Component, useState, useEffect } from 'react';\nimport { get, post } from 'axios';\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { connect } from \"react-redux\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport DataGrid from '../../../components/data-grid';\nimport { storeMaterials } from '../../../actions/Modules'; // import DataGrid from '../DataGrid';\n\nimport { CONSTANTS } from '../../../util/Constants';\nimport Question from './Question/index';\nimport { LABEL_LIST as DataTableHeader } from '../util/DataTableHeader';\nimport { trackPromise, usePromiseTracker } from 'react-promise-tracker';\nconst url_materials = CONSTANTS.MATERIALS;\n\nclass MaterialList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.refreshList = () => {\n      this.getMaterialList();\n      this.setState({\n        showQuestionModal: false\n      });\n    };\n\n    this.hideQuestionModal = () => {\n      this.setState({\n        showQuestionModal: false\n      });\n    };\n\n    this.getMaterialId = material_id => {\n      this.setState({\n        material_id,\n        showQuestionModal: true\n      });\n    };\n\n    this.onChangeStatus = (id, materialStatus) => {\n      const request = {\n        material_id: id,\n        status: materialStatus ? 1 : 0\n      };\n      post(url_materials.UPDATE_STATUS_MATERIAL, request).then(response => {\n        const res = response.data;\n\n        if (res.status) {\n          toast.success('Success: ' + res.message);\n          this.getMaterialList();\n        } else {\n          toast.error('Error: ' + res.message);\n        }\n      }, error => {\n        toast.error('Error: Bad request.');\n      });\n    };\n\n    this.onOpenModal = id => {\n      this.setState({\n        showQuestionModal: true,\n        questionAction: 'CREATE',\n        material_id: id\n      });\n    };\n\n    this.onEdit = id => {\n      this.props.onEditMaterial(id, this.state.approvalStatus);\n    };\n\n    this.deleteMaterial = id => {\n      post(url_materials.DELETE_URL, {\n        id\n      }).then(response => {\n        const res = response.data;\n\n        if (res.statusCode == 200) {\n          toast.success('Success: ' + res.message);\n          this.getMaterialList(this.state.approvalStatus);\n        } else {\n          toast.error('Error: ' + res.message);\n        }\n      }, error => {\n        toast.error('Error: Bad request.');\n      });\n    };\n\n    this.onGetList = id => {\n      this.setState({\n        showQuestionModal: true,\n        questionAction: 'LIST',\n        material_id: id\n      });\n    };\n\n    this.filterMaterials = filterQuery => {\n      let {\n        materials\n      } = this.state;\n      let filterdMaterial = materials;\n\n      if (filterQuery.length > 0) {\n        filterdMaterial = materials.filter(material => material.material_name.toLowerCase().indexOf(filterQuery.toLowerCase()) !== -1);\n      }\n\n      this.setState({\n        filterdMaterial\n      });\n    };\n\n    this.state = {\n      module_id: this.props.module_id,\n      parent_subject: this.props.parent_subject,\n      materials: [],\n      showQuestionModal: false,\n      questionAction: 'CREATE',\n      material_id: '',\n      moduleName: '',\n      filterdMaterial: [],\n      totalMaterial: 0,\n      approvalStatus: 1,\n      rejection: {\n        id: '',\n        reason: '',\n        Modal: false\n      },\n      reason_require: false\n    };\n  }\n\n  componentDidMount() {\n    const moduleList = this.props.state;\n    const {\n      module_id\n    } = this.state;\n    const moduleData = moduleList.filter(mod => mod.subject_id == module_id);\n\n    if (moduleData.length > 0) {\n      this.setState({\n        moduleName: moduleData[0].subject_name\n      });\n    }\n\n    this.getMaterialList(this.state.approvalStatus);\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      isModuleListUpdated\n    } = this.props;\n    console.log('this.props ', this.props);\n\n    if (prevProps.isModuleListUpdated !== isModuleListUpdated && isModuleListUpdated) {\n      this.getMaterialList();\n    }\n  }\n\n  reasonChangeHandler(e) {\n    if (e.target.checkValidity()) {\n      this.setState({\n        [e.target.name]: true\n      });\n      this.setState({\n        rejection: { ...this.state.rejection,\n          reason: e.target.value\n        }\n      });\n    }\n  }\n\n  setRejectionId(id) {\n    this.setState({\n      rejection: { ...this.state.rejection,\n        id,\n        modal: \"show\"\n      }\n    });\n  }\n\n  cancelModal() {\n    this.setState({\n      rejection: { ...this.state.rejection,\n        reason: '',\n        modal: ''\n      }\n    }, () => {});\n  }\n\n  async getMaterialList(approveStatus) {\n    this.setState({\n      approvalStatus: approveStatus\n    });\n\n    try {\n      const materialListUrl = url_materials.LIST_URL + `?page=1&size=15&sort=material_id&status=&order=desc&keyword&module_id=${this.state.module_id}&approval_status=${approveStatus ? approveStatus : 1}`;\n      const materialData = (await trackPromise(get(materialListUrl))).data;\n      const materialTotal = materialData.totalElements;\n      const materialList = materialData.data;\n      this.setState({\n        totalMaterial: materialTotal\n      });\n\n      if (materialData.statusCode == 200) {\n        const materials = [];\n\n        if (materialList && materialList.length > 0) {\n          materialList.forEach(element => {\n            let dd = {};\n            dd = element;\n            dd.id = element.material_id;\n            dd.dataStatus = element.material_status;\n            dd.material_type = element.material_type == 'Promotion' ? 'Quiz' : element.material_type;\n            dd.subRowsCount = element.question_count ? element.question_count : 0;\n            materials.push(element);\n          });\n        }\n\n        this.props.storeMaterials(materials);\n        this.setState({\n          materials,\n          filterdMaterial: materials\n        });\n      } else {\n        toast.error(materialData.message);\n      }\n    } catch (e) {\n      toast.error(e.message);\n    }\n  }\n\n  async onChangeSelect(id, materialStatus) {\n    if (materialStatus == 2) {\n      if (!this.state.reason_require) {\n        toast.error('Please enter reason');\n        return;\n      }\n\n      try {\n        const rejectionMessageUrl = `${url_materials.REJECTION_MESSAGE}`;\n        const data = {\n          id: this.state.rejection.id,\n          message: this.state.rejection.reason,\n          type: \"material\"\n        };\n        const rejectionSuccess = (await trackPromise(post(rejectionMessageUrl, data))).data;\n        this.getMaterialList(\"0\");\n        rejectionSuccess.statusCode == 200 ? toast.success(rejectionSuccess.message) : toast.error(rejectionSuccess.message);\n        this.cancelModal();\n      } catch (e) {\n        toast.error('Network Error');\n      }\n    }\n\n    try {\n      const material_approve_url = `${url_materials.MATERIAL_APPROVE_STATUS}`;\n      const data = {\n        id: id,\n        status: materialStatus\n      };\n      const matsuccess = (await trackPromise(post(material_approve_url, data))).data;\n      this.getMaterialList(\"0\");\n      materialStatus == 1 ? toast.success('Material accepted successfully') : toast.error('Material rejected successfully');\n    } catch (e) {\n      toast.error(e.message);\n    }\n  }\n\n  deleteModuleConfirm(id) {\n    this.props.setModalPopup({\n      'rowId': id,\n      'isOpen': true,\n      'onConfirmCallBack': () => this.deleteMaterial(id),\n      'title': \"Confirm Delete\",\n      'content': \"Are you sure to Delete ?\",\n      'CancelBtnLabel': \"Cancel\",\n      'confirmBtnLabel': \"Delete\"\n    });\n  }\n\n  render() {\n    const {\n      materials,\n      rejection,\n      approvalStatus,\n      filterdMaterial,\n      totalMaterial,\n      showQuestionModal,\n      material_id,\n      questionAction,\n      moduleName\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"h-100 mainbg material-tab-wapper col-md-50\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"material-header d-flex justify-content-between \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 21\n      }\n    }, \"Material\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + \"/images/close.svg\",\n      alt: \"\",\n      onClick: () => this.props.closeMaterialList(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainbg  cus-pills\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav nav-pills\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item\",\n      onClick: () => this.getMaterialList(1),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"nav-link approved-link active \",\n      \"data-toggle\": \"pill\",\n      href: \"#approved\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 29\n      }\n    }, \"Approved\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"nav-link\",\n      \"data-toggle\": \"pill\",\n      href: \"#pending\",\n      onClick: () => this.getMaterialList(\"0\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 29\n      }\n    }, \"Pending\")), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"nav-link\",\n      \"data-toggle\": \"pill\",\n      href: \"#rejected\",\n      onClick: () => this.getMaterialList(2),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }, \"Rejected\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-content pzero\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tab-pane active approved\",\n      id: \"approved\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Modules-txt h-100 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 33\n      }\n    }, \"Module: \", /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 63\n      }\n    }, moduleName), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 83\n      }\n    }, \"(Active)\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mb-10 modulesheader mt-30\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 34\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex entities-box align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 45\n      }\n    }, \"All Entities | \", totalMaterial > 0 ? totalMaterial < 10 ? `0${totalMaterial}` : totalMaterial : 0, \" \"), approvalStatus != \"0\" && /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn add\",\n      onClick: () => this.props.onOpenMaterialModal(this.props.module_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 68\n      }\n    }, \"Add Material\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 d-flex justify-content-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"searchbox \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"search\",\n      placeholder: \"What are you looking for ?\",\n      onChange: e => this.filterMaterials(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-search\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 69\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + \"/images/filter.svg\",\n      alt: \"filter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 45\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DataGrid, {\n      columns: approvalStatus == \"0\" ? DataTableHeader.MATERIAL_PENDING : DataTableHeader.MATERIAL,\n      data: filterdMaterial,\n      onChangeStatus: (id, status) => this.onChangeStatus(id, status),\n      onOpenModal: id => this.onOpenModal(id),\n      onEdit: id => this.onEdit(id),\n      onDelete: id => this.deleteModuleConfirm(id),\n      onGetList: id => this.onGetList(id),\n      onChangeSelect: (id, status) => this.onChangeSelect(id, status),\n      setRejectionId: id => this.setRejectionId(id),\n      onOpenMaterialViewModal: id => this.props.onOpenMaterialViewModal(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 37\n      }\n    })), showQuestionModal && /*#__PURE__*/React.createElement(Question, Object.assign({}, this.props, {\n      showQuestionModal: showQuestionModal,\n      material_id: material_id,\n      refreshList: this.refreshList,\n      questionAction: questionAction,\n      hideQuestionModal: this.hideQuestionModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 33\n      }\n    })))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `modal fade ${rejection.modal}`,\n      id: \"rejectModal\",\n      style: {\n        display: `${rejection.modal ? 'block' : 'none'}`\n      },\n      tabIndex: -1,\n      role: \"dialog\",\n      \"aria-labelledby\": \"exampleModalLabel\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-dialog\",\n      role: \"document\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"modal-title\",\n      id: \"exampleModalLabel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 11\n      }\n    }, \"Reason\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"close\",\n      onClick: () => this.cancelModal(),\n      \"aria-label\": \"Close\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 13\n      }\n    }, \"\\xD7\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      noValidate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group form_control_space margin_bottom_1rem\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"formGroupExampleInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control required custom_textarea\",\n      id: \"formGroupExampleInput\",\n      placeholder: \"Enter Reason\",\n      name: \"reason_require\",\n      onChange: e => this.reasonChangeHandler(e),\n      value: this.state.rejection.reason,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-secondary\",\n      onClick: () => this.cancelModal(),\n      \"data-dismiss\": \"modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 11\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: () => this.onChangeSelect(rejection.id, 2),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }\n    }, \"Submit\")))))));\n  }\n\n}\n\nexport default connect(state => ({\n  state: state.moduleList\n}), {\n  storeMaterials\n})(MaterialList);","map":{"version":3,"sources":["/home/alrin/reactproject/kms-ui/src/components/module/Modal/MaterialList.js"],"names":["React","Component","useState","useEffect","get","post","Button","Modal","ModalHeader","ModalBody","ModalFooter","confirmAlert","connect","ToastContainer","toast","DataGrid","storeMaterials","CONSTANTS","Question","LABEL_LIST","DataTableHeader","trackPromise","usePromiseTracker","url_materials","MATERIALS","MaterialList","constructor","props","refreshList","getMaterialList","setState","showQuestionModal","hideQuestionModal","getMaterialId","material_id","onChangeStatus","id","materialStatus","request","status","UPDATE_STATUS_MATERIAL","then","response","res","data","success","message","error","onOpenModal","questionAction","onEdit","onEditMaterial","state","approvalStatus","deleteMaterial","DELETE_URL","statusCode","onGetList","filterMaterials","filterQuery","materials","filterdMaterial","length","filter","material","material_name","toLowerCase","indexOf","module_id","parent_subject","moduleName","totalMaterial","rejection","reason","reason_require","componentDidMount","moduleList","moduleData","mod","subject_id","subject_name","componentDidUpdate","prevProps","isModuleListUpdated","console","log","reasonChangeHandler","e","target","checkValidity","name","value","setRejectionId","modal","cancelModal","approveStatus","materialListUrl","LIST_URL","materialData","materialTotal","totalElements","materialList","forEach","element","dd","dataStatus","material_status","material_type","subRowsCount","question_count","push","onChangeSelect","rejectionMessageUrl","REJECTION_MESSAGE","type","rejectionSuccess","material_approve_url","MATERIAL_APPROVE_STATUS","matsuccess","deleteModuleConfirm","setModalPopup","render","process","env","PUBLIC_URL","closeMaterialList","onOpenMaterialModal","MATERIAL_PENDING","MATERIAL","onOpenMaterialViewModal","display"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\nimport { get, post } from 'axios'\nimport { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { confirmAlert } from 'react-confirm-alert';\nimport { connect } from \"react-redux\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport DataGrid from '../../../components/data-grid';\nimport { storeMaterials } from '../../../actions/Modules'\n// import DataGrid from '../DataGrid';\nimport { CONSTANTS } from '../../../util/Constants'\nimport Question from './Question/index';\nimport { LABEL_LIST as DataTableHeader } from '../util/DataTableHeader';\nimport { trackPromise, usePromiseTracker } from 'react-promise-tracker';\n\n\nconst url_materials = CONSTANTS.MATERIALS;\n\n\nclass MaterialList extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            module_id: this.props.module_id,\n            parent_subject: this.props.parent_subject,\n            materials: [],\n            showQuestionModal: false,\n            questionAction: 'CREATE',\n            material_id: '',\n            moduleName: '',\n            filterdMaterial:[],\n            totalMaterial:0,\n            approvalStatus:1,\n            rejection:{\n                id:'',\n                reason:'',\n                Modal:false\n            },\n            reason_require:false\n        }\n    }\n    componentDidMount() {\n        const moduleList = this.props.state;\n        const { module_id } = this.state;\n        const moduleData = moduleList.filter((mod) => mod.subject_id == module_id);\n        if (moduleData.length > 0) {\n            this.setState({ moduleName: moduleData[0].subject_name });\n        }\n        \n        this.getMaterialList(this.state.approvalStatus);\n    }\n    componentDidUpdate(prevProps) {\n        const { isModuleListUpdated } = this.props;\n        console.log('this.props ',this.props);\n        if (prevProps.isModuleListUpdated !== isModuleListUpdated && isModuleListUpdated) {\n            this.getMaterialList();\n        }\n    }\n\n    reasonChangeHandler (e) {\n        if(e.target.checkValidity()){\n            this.setState({[e.target.name]:true})\n            this.setState({rejection:{...this.state.rejection,reason:e.target.value}});\n        }   \n    }\n\n    setRejectionId(id) {\n        this.setState({rejection:{...this.state.rejection,id,modal:\"show\"}});\n    }\n\n    cancelModal(){\n        this.setState({rejection:{...this.state.rejection, reason:'', modal:''}}, ()=>{})\n    }\n    \n    async getMaterialList (approveStatus) {\n        this.setState({approvalStatus:approveStatus})\n        try {\n            const materialListUrl = url_materials.LIST_URL + `?page=1&size=15&sort=material_id&status=&order=desc&keyword&module_id=${this.state.module_id}&approval_status=${approveStatus ? approveStatus : 1}`;\n            const materialData = (await (trackPromise(get(materialListUrl)))).data;\n            const materialTotal = materialData.totalElements\n            const materialList = materialData.data\n            this.setState({totalMaterial:materialTotal })\n            if(materialData.statusCode == 200){\n                const materials = [];\n                if(materialList && materialList.length > 0){\n                materialList.forEach(element => {\n                    let dd = {};\n                    dd = element;\n                    dd.id = element.material_id;\n                    dd.dataStatus = element.material_status;\n                    dd.material_type = element.material_type == 'Promotion' ? 'Quiz' : element.material_type;\n                    dd.subRowsCount = element.question_count ? element.question_count : 0;\n                    materials.push(element);\n                });\n              }\n                this.props.storeMaterials(materials);\n                this.setState({ materials,filterdMaterial:materials });\n            }else{\n                toast.error(materialData.message);\n            }\n          } catch (e) {\n            toast.error(e.message);\n          }\n        }   \n\n    async onChangeSelect (id, materialStatus) {\n        if(materialStatus == 2){\n            if (!this.state.reason_require) {\n                toast.error('Please enter reason');\n                return;\n              }\n            try {\n                const rejectionMessageUrl = `${url_materials.REJECTION_MESSAGE}`;\n                const data = {\n                    id:this.state.rejection.id,\n                    message:this.state.rejection.reason,\n                    type:\"material\"\n                }\n                const rejectionSuccess = (await (trackPromise(post(rejectionMessageUrl, data)))).data;\n                this.getMaterialList(\"0\");\n                rejectionSuccess.statusCode == 200 ? toast.success(rejectionSuccess.message) : toast.error(rejectionSuccess.message)\n                this.cancelModal()\n                } catch (e) {\n                toast.error('Network Error');\n            }\n        }\n        try {\n            const material_approve_url = `${url_materials.MATERIAL_APPROVE_STATUS}`;\n            const data = {\n                id:id,\n                status:materialStatus\n            }\n            const matsuccess = (await (trackPromise(post(material_approve_url, data)))).data;\n            this.getMaterialList(\"0\");\n            materialStatus == 1 ? toast.success('Material accepted successfully') : toast.error('Material rejected successfully')\n            } catch (e) {\n            toast.error(e.message);\n        }\n    }\n    \n    refreshList = () => {\n        this.getMaterialList();\n        this.setState({ showQuestionModal: false });\n    }\n\n    hideQuestionModal = () => {\n        this.setState({ showQuestionModal: false });\n    }\n    getMaterialId = (material_id) => {\n        this.setState({ material_id, showQuestionModal: true });\n    }\n\n    onChangeStatus = (id, materialStatus) => {\n        const request = { material_id: id, status: materialStatus ? 1 : 0 };\n        post(url_materials.UPDATE_STATUS_MATERIAL, request).then(response => {\n            const res = response.data;\n            if (res.status) {\n                toast.success('Success: ' + res.message);\n                this.getMaterialList();\n            } else {\n                toast.error('Error: ' + res.message);\n            }\n        }, (error) => {\n            toast.error('Error: Bad request.');\n        })\n    }\n    onOpenModal = (id) => {\n        this.setState({ showQuestionModal: true, questionAction: 'CREATE', material_id: id });\n    }\n   \n    onEdit = (id) => {\n        this.props.onEditMaterial(id, this.state.approvalStatus)\n    }\n\n    deleteModuleConfirm(id) {\n        this.props.setModalPopup({\n            'rowId': id,\n            'isOpen': true,\n            'onConfirmCallBack': () => this.deleteMaterial(id),\n            'title': \"Confirm Delete\",\n            'content': \"Are you sure to Delete ?\",\n            'CancelBtnLabel': \"Cancel\",\n            'confirmBtnLabel': \"Delete\"\n          });\n    }\n\n    deleteMaterial = (id) => {\n        post(url_materials.DELETE_URL,\n            { id }).then(response => {\n                const res = response.data;\n                if (res.statusCode == 200) {\n                    toast.success('Success: ' + res.message);\n                    this.getMaterialList(this.state.approvalStatus);\n                } else {\n                    toast.error('Error: ' + res.message);\n                }\n            }, (error) => {\n                toast.error('Error: Bad request.');\n            })\n    }\n    onGetList = (id) => {\n        this.setState({ showQuestionModal: true, questionAction: 'LIST', material_id: id });\n    }\n\n    filterMaterials = (filterQuery) => {\n        let { materials } = this.state;\n        let filterdMaterial = materials;\n        if (filterQuery.length > 0) {\n            filterdMaterial = materials.filter((material) => material.material_name.toLowerCase().indexOf(filterQuery.toLowerCase()) !== -1);\n        }\n        this.setState({\n            filterdMaterial\n        })\n    }\n    \n \n    render() {\n        const { materials, rejection, approvalStatus, filterdMaterial, totalMaterial, showQuestionModal, material_id, questionAction, moduleName } = this.state;\n        return (\n            <div className=\"h-100 mainbg material-tab-wapper col-md-50\">\n                <div className=\"material-header d-flex justify-content-between \">\n                    <h4>Material</h4>\n                    <img src={process.env.PUBLIC_URL + \"/images/close.svg\"} alt=\"\" onClick={() => this.props.closeMaterialList()} />\n                </div>\n                <div className=\"mainbg  cus-pills\">\n                    <ul className=\"nav nav-pills\">\n                        <li className=\"nav-item\" onClick={() => this.getMaterialList(1)}>\n                            <a className=\"nav-link approved-link active \" data-toggle=\"pill\"\n                                href=\"#approved\">Approved</a>\n                        </li>\n                        <li className=\"nav-item\" >\n                            <a className=\"nav-link\" data-toggle=\"pill\" href=\"#pending\" onClick={() => this.getMaterialList(\"0\")}>Pending</a>\n                        </li>\n                        <li className=\"nav-item\" >\n                            <a className=\"nav-link\" data-toggle=\"pill\" href=\"#rejected\" onClick={() => this.getMaterialList(2)}>Rejected</a>\n                        </li>\n                    </ul>\n                    <div className=\"tab-content pzero\">\n                        <div className=\"tab-pane active approved\" id=\"approved\">\n\n                            <div className=\"Modules-txt h-100 \">\n                                <h4 className=\"title\">Module: <b>{moduleName}</b> <span>(Active)</span></h4>\n                                <div className=\"d-flex mb-10 modulesheader mt-30\">\n                                 <div className=\"col-md-6\">\n                                        <div className=\"d-flex entities-box align-items-center\">\n                                            <h4>All Entities | {totalMaterial > 0 ? (totalMaterial < 10 ? `0${totalMaterial}` : totalMaterial) : 0} </h4>\n                                        {approvalStatus != \"0\" &&  <button className=\"btn add\" onClick={() => this.props.onOpenMaterialModal(this.props.module_id)}>Add Material</button> }\n                                    </div>\n                                    </div>\n\n                                    <div className=\"col-md-6 d-flex justify-content-end\">\n                                        <div className=\"searchbox \">\n                                            <input type=\"search\"\n                                                placeholder=\"What are you looking for ?\"  onChange={(e)=>this.filterMaterials(e.target.value )}/>\n                                            <button className=\"btn\"><i className=\"fa fa-search\"\n                                                aria-hidden=\"true\"></i></button>\n                                        </div>\n                                        <div className=\"filter\">\n                                            <img src={process.env.PUBLIC_URL+\"/images/filter.svg\"} alt=\"filter\" />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"table-responsive\">\n                                    <DataGrid\n                                        columns={approvalStatus == \"0\" ? DataTableHeader.MATERIAL_PENDING : DataTableHeader.MATERIAL}\n                                        data={filterdMaterial}\n                                        onChangeStatus={(id, status) => this.onChangeStatus(id, status)}\n                                        onOpenModal={(id) => this.onOpenModal(id)}\n                                        onEdit={(id) => this.onEdit(id)}\n                                        onDelete={(id) => this.deleteModuleConfirm(id)}\n                                        onGetList={(id) => this.onGetList(id)}\n                                        onChangeSelect={(id, status) => this.onChangeSelect(id,status)}\n                                        setRejectionId={(id) => this.setRejectionId(id)}\n                                        onOpenMaterialViewModal = {(id) => this.props.onOpenMaterialViewModal(id)}\n                                    />\n                                </div>\n                                {showQuestionModal &&\n                                <Question\n                                    {...this.props}\n                                    showQuestionModal={showQuestionModal}\n                                    material_id={material_id}\n                                    refreshList={this.refreshList}\n                                    questionAction={questionAction}\n                                    hideQuestionModal={this.hideQuestionModal}\n                                />\n                                }   \n                            </div>\n                        </div>\n                    </div>\n                </div>\n              <div>\n  \n  <div className={`modal fade ${rejection.modal}`} id=\"rejectModal\" style={{ display: `${rejection.modal ? 'block' : 'none'}` }} tabIndex={-1} role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n    <div className=\"modal-dialog\" role=\"document\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\" id=\"exampleModalLabel\">Reason</h5>\n          <button type=\"button\" className=\"close\" onClick={() => this.cancelModal()} aria-label=\"Close\">\n            <span aria-hidden=\"true\" ></span>\n          </button>\n        </div>\n        <div className=\"modal-body\">\n        <form noValidate>\n              <div className=\"form-group form_control_space margin_bottom_1rem\">\n                <label htmlFor=\"formGroupExampleInput\"></label>\n                <input\n                  type=\"text\"\n                  className=\"form-control required custom_textarea\"\n                  id=\"formGroupExampleInput\"\n                  placeholder=\"Enter Reason\" name=\"reason_require\"\n                  onChange={(e) => this.reasonChangeHandler(e)}\n                  value={this.state.rejection.reason}\n                  required\n                />\n              </div>\n            </form>\n        </div>\n        <div className=\"modal-footer\">\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={() => this.cancelModal()} data-dismiss=\"modal\">Cancel</button>\n          <button type=\"button\" className=\"btn btn-primary\" onClick={() => this.onChangeSelect(rejection.id, 2)}>Submit</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n            </div>\n        )\n    }\n}\nexport default connect((state) => ({ state: state.moduleList }), { storeMaterials })(MaterialList);"]},"metadata":{},"sourceType":"module"}