{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.getToken = getToken;\nexports.setToken = setToken;\nexports.getuuid = getuuid;\nexports.encrypt = encrypt;\nexports.encryptAuth = encryptAuth;\n\nvar _v = require('uuid/v1');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _md = require('md5');\n\nvar _md2 = _interopRequireDefault(_md);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _cryptoJs = require('crypto-js');\n\nvar _cryptoJs2 = _interopRequireDefault(_cryptoJs);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getToken(auth, channel) {\n  var isEncrpt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var encrptKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"key\";\n  var autVal = auth;\n  if (isEncrpt && getCookie(\"X-Auth-Token\")) autVal = encryptAuth((0, _moment2.default)(new Date()).format(\"DDMMYYYYhhmmssSSS\") + '||' + getCookie(\"X-Auth-Token\"), encrptKey);\n  var entity = getCookie(\"X-Entity\") ? {\n    \"X-Entity\": getCookie(\"X-Entity\")\n  } : {};\n  return _extends({\n    \"X-Auth-Token\": getCookie(\"X-Auth-Token\"),\n    \"X-UserId\": getCookie(\"X-UserId\"),\n    \"X-Msisdn\": getCookie(\"X-Msisdn\"),\n    \"orderId\": getuuid(),\n    \"Authorization\": autVal,\n    \"channel\": channel,\n    \"Access-Control-Allow-Origin\": \"*\"\n  }, entity);\n}\n\nfunction getCookie(name) {\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1, c.length);\n    }\n\n    if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n}\n\nfunction setToken(token, userId) {\n  var msisdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n\n  if (!token && !userId) {\n    document.cookie = 'X-Auth-Token=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n    document.cookie = 'X-UserId=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n    document.cookie = 'X-Msisdn=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n  } else {\n    var date = new Date();\n    date.setTime(date.getTime() + 24 * 60 * 60 * 1000);\n    document.cookie = 'X-Auth-Token=' + token + ';expires=' + date.toUTCString() + ';path=/';\n    document.cookie = 'X-UserId=' + userId + ';expires=' + date.toUTCString() + ';path=/';\n    document.cookie = 'X-Msisdn=' + msisdn + ';expires=' + date.toUTCString() + ';path=/';\n  }\n}\n\nfunction getuuid() {\n  return (0, _v2.default)();\n}\n\nfunction encrypt(type, value) {\n  switch (type) {\n    case 'md5':\n      return (0, _md2.default)(value);\n\n    default:\n      return value;\n  }\n}\n\nfunction encryptAuth(data, key) {\n  var keyHex = _cryptoJs2.default.enc.Utf8.parse(key);\n\n  var encrypted = _cryptoJs2.default.TripleDES.encrypt(data, keyHex, {\n    mode: _cryptoJs2.default.mode.ECB,\n    padding: _cryptoJs2.default.pad.Pkcs7\n  });\n\n  return encrypted.toString();\n}","map":{"version":3,"sources":["/home/alrin/reactproject/kms-ui/node_modules/@6d-ui/ajax/build/elements/util/Utils.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","getToken","setToken","getuuid","encrypt","encryptAuth","_v","require","_v2","_interopRequireDefault","_md","_md2","_moment","_moment2","_cryptoJs","_cryptoJs2","obj","__esModule","default","auth","channel","isEncrpt","undefined","encrptKey","autVal","getCookie","Date","format","entity","name","nameEQ","ca","document","cookie","split","c","charAt","substring","indexOf","token","userId","msisdn","date","setTime","getTime","toUTCString","type","data","keyHex","enc","Utf8","parse","encrypted","TripleDES","mode","ECB","padding","pad","Pkcs7","toString"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.getToken = getToken;\nexports.setToken = setToken;\nexports.getuuid = getuuid;\nexports.encrypt = encrypt;\nexports.encryptAuth = encryptAuth;\n\nvar _v = require('uuid/v1');\n\nvar _v2 = _interopRequireDefault(_v);\n\nvar _md = require('md5');\n\nvar _md2 = _interopRequireDefault(_md);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _cryptoJs = require('crypto-js');\n\nvar _cryptoJs2 = _interopRequireDefault(_cryptoJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction getToken(auth, channel) {\n    var isEncrpt = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var encrptKey = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"key\";\n\n    var autVal = auth;\n    if (isEncrpt && getCookie(\"X-Auth-Token\")) autVal = encryptAuth((0, _moment2.default)(new Date()).format(\"DDMMYYYYhhmmssSSS\") + '||' + getCookie(\"X-Auth-Token\"), encrptKey);\n\n    var entity = getCookie(\"X-Entity\") ? { \"X-Entity\": getCookie(\"X-Entity\") } : {};\n    return _extends({\n        \"X-Auth-Token\": getCookie(\"X-Auth-Token\"),\n        \"X-UserId\": getCookie(\"X-UserId\"),\n        \"X-Msisdn\": getCookie(\"X-Msisdn\"),\n        \"orderId\": getuuid(),\n        \"Authorization\": autVal,\n        \"channel\": channel,\n        \"Access-Control-Allow-Origin\": \"*\"\n    }, entity);\n}\nfunction getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(';');\n    for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1, c.length);\n        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n}\nfunction setToken(token, userId) {\n    var msisdn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n\n    if (!token && !userId) {\n        document.cookie = 'X-Auth-Token=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n        document.cookie = 'X-UserId=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n        document.cookie = 'X-Msisdn=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/';\n    } else {\n        var date = new Date();\n        date.setTime(date.getTime() + 24 * 60 * 60 * 1000);\n        document.cookie = 'X-Auth-Token=' + token + ';expires=' + date.toUTCString() + ';path=/';\n        document.cookie = 'X-UserId=' + userId + ';expires=' + date.toUTCString() + ';path=/';\n        document.cookie = 'X-Msisdn=' + msisdn + ';expires=' + date.toUTCString() + ';path=/';\n    }\n}\nfunction getuuid() {\n    return (0, _v2.default)();\n}\nfunction encrypt(type, value) {\n    switch (type) {\n        case 'md5':\n            return (0, _md2.default)(value);\n        default:\n            return value;\n    }\n}\n\nfunction encryptAuth(data, key) {\n    var keyHex = _cryptoJs2.default.enc.Utf8.parse(key);\n    var encrypted = _cryptoJs2.default.TripleDES.encrypt(data, keyHex, {\n        mode: _cryptoJs2.default.mode.ECB,\n        padding: _cryptoJs2.default.pad.Pkcs7\n    });\n\n    return encrypted.toString();\n}"]},"metadata":{},"sourceType":"script"}